<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ëŒì´ ê¹€í† í† </title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        * { font-family: Pretendard, sans-serif; box-sizing: border-box; }
        body { max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f0f0f0; }
        .game-container { background-color: white; border-radius: 10px; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .game-title { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .game-title img { width: 30px; height: 30px; }
        .balance, .match-info { margin-bottom: 10px; }
        .teams { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .team { text-align: center; }
        .team-icon { font-size: 24px; }
        .score-board { display: flex; justify-content: center; align-items: center; margin-bottom: 20px; font-size: 24px; font-weight: bold; }
        .score-board > * { margin: 0 10px; }
        .betting-form { margin-bottom: 20px; }
        .betting-form select, .betting-form input { width: 100%; padding: 10px; margin-bottom: 10px; }
        .commentary { min-height: 100px; border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; overflow-y: auto; max-height: 200px; background-color: #f9f9f9; line-height: 1.6; }
        .commentary .highlight { font-weight: bold; margin: 10px 0; }
        .progress-bar { width: 100%; height: 20px; background-color: #f0f0f0; margin-bottom: 20px; border-radius: 10px; overflow: hidden; }
        .progress { width: 0%; height: 100%; background-color: #ffd700; transition: width 0.5s ease; }
        .archive { border-top: 1px solid #ccc; padding-top: 20px; }
        .archive > div { margin-bottom: 10px; padding: 10px; border-radius: 5px; }
        .archive .success { background-color: #90EE90; }
        .archive .failure { background-color: #FFCCCB; }
        button { width: 100%; padding: 10px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:disabled { background-color: #cccccc; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-title">
            <img src="https://em-content.zobj.net/thumbs/120/apple/325/soccer-ball_26bd.png" alt="Soccer Ball">
            <h1>ìˆ«ëŒì´ ê¹€í† í† </h1>
        </div>
        <div class="balance">ì”ì•¡: â‚©<span id="balance">100,000,000</span></div>
        <div class="match-info" id="match-info">16ê°• 1ì°¨ì „</div>
        <div class="teams">
            <div class="team">
                <div class="team-icon" id="team-a-icon"></div>
                <div id="team-a-name"></div>
                <div>ìŠ¹ë¥ : <span id="team-a-odds"></span>%</div>
            </div>
            <div class="score-board">
                <span id="team-a-score">0</span>
                <span>vs</span>
                <span id="team-b-score">0</span>
            </div>
            <div class="team">
                <div class="team-icon" id="team-b-icon"></div>
                <div id="team-b-name"></div>
                <div>ìŠ¹ë¥ : <span id="team-b-odds"></span>%</div>
            </div>
        </div>
        <div class="betting-form">
            <select id="bet-winner">
                <option value="">ìŠ¹ë¶€ì˜ˆì¸¡! ìŠ¹ìëŠ”?</option>
            </select>
            <input type="number" id="bet-amount" placeholder="ë°°íŒ… ê¸ˆì•¡">
            <div>ì˜ˆìƒ ìˆ˜ìµ: â‚©<span id="expected-profit">0</span></div>
            <button id="start-match" disabled>ìŠ¹ë¶€ë¥¼ ì˜ˆì¸¡í•˜ê³  ê¸ˆì•¡ì„ ë°°íŒ…í•˜ì„¸ìš”!</button>
        </div>
        <div class="commentary" id="commentary"></div>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div class="archive" id="archive"></div>
    </div>
    <audio id="background-music" loop>
        <source src="https://www.televisiontunes.com/uploads/audio/UEFA%20Champions%20League%20-%20Full%20Version.mp3" type="audio/mpeg">
    </audio>
    <script>
         let recentCommentaries = [];  // ì—¬ê¸°ì— recentCommentariesì™€ getRandomCommentary ì¶”ê°€

function getRandomCommentary(type) {
    const texts = commentaryTexts[type];
    
    // ìµœê·¼ 3ê°œì˜ ì½”ë©˜í„°ë¦¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ í…ìŠ¤íŠ¸ë“¤ë§Œ ì‚¬ìš© ê°€ëŠ¥
    let availableTexts = texts.filter(text => !recentCommentaries.includes(text));

    // ë§Œì•½ ëª¨ë“  í…ìŠ¤íŠ¸ê°€ ìµœê·¼ì— ì‚¬ìš©ëœ ê²½ìš°, ìƒˆë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•¨
    if (availableTexts.length === 0) {
        availableTexts = texts;
    }

    const selectedText = availableTexts[Math.floor(Math.random() * availableTexts.length)];
    
    // recentCommentaries ë°°ì—´ ê´€ë¦¬ (ìµœëŒ€ 3ê°œë§Œ ìœ ì§€)
    recentCommentaries.push(selectedText);
    if (recentCommentaries.length > 3) {
        recentCommentaries.shift(); // ë°°ì—´ì˜ ì²« ë²ˆì§¸ ìš”ì†Œ ì œê±°
    }

    return selectedText;
}
        const teams = [
            {name: 'The animals', icon: 'ğŸ¯'},
            {name: 'The ballons', icon: 'ğŸˆ'},
            {name: 'The books', icon: 'ğŸ“š'},
            {name: 'The burgers', icon: 'ğŸ”'},
            {name: 'The cars', icon: 'ğŸš—'},
            {name: 'The cities', icon: 'ğŸ™ï¸'},
            {name: 'The desserts', icon: 'ğŸ§'},
            {name: 'The drinks', icon: 'ğŸ§ƒ'},
            {name: 'The flowers', icon: 'ğŸŒ¸'},
            {name: 'The forests', icon: 'ğŸŒ²'},
            {name: 'The Games', icon: 'ğŸ•¹ï¸'},
            {name: 'The Mountains', icon: 'â›°ï¸'},
            {name: 'The Pizzas', icon: 'ğŸ•'},
            {name: 'The planes', icon: 'âœˆï¸'},
            {name: 'The singers', icon: 'ğŸ§‘â€ğŸ¤'},
            {name: 'The smiles', icon: 'ğŸ˜'}
        ];

        let balance = 100000000;
        let currentMatch = {};
        let matchHistory = [];
        let commentary = [];
        let currentRound = 16;
        let currentMatchNumber = 1;
        let isMatchEnded = false;
        let matchups = [];
        let usedCommentaries = new Set();

        const commentaryTexts = {
            kickoff: [
        "ğŸ™ï¸: Team Aì™€ Team Bì˜ ê²½ê¸°ê°€ ì‹œì‘ë©ë‹ˆë‹¤! ë©‹ì§„ ê²½ê¸°ê°€ ê¸°ëŒ€ë©ë‹ˆë‹¤!",
        "ğŸ™ï¸: ì–‘ íŒ€ì´ ê·¸ë¼ìš´ë“œ ìœ„ì— ì˜¬ëìŠµë‹ˆë‹¤. Team Aì™€ Team Bì˜ ê²½ê¸°ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!",
        "ğŸ™ï¸: Team Aì™€ Team B, ëª¨ë‘ê°€ ì£¼ëª©í•˜ëŠ” ê²½ê¸°ê°€ ì´ì œ ì‹œì‘ë©ë‹ˆë‹¤!",
        "ğŸ™ï¸: Team Aì™€ Team Bì˜ íŒ½íŒ½í•œ ëŒ€ê²°ì´ ì´ì œ ë§‰ ì‹œì‘ë©ë‹ˆë‹¤!",
        "ğŸ™ï¸: ê¸´ì¥ê° ë„˜ì¹˜ëŠ” ìˆœê°„! Team Aì™€ Team Bê°€ ê²½ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!"
    ],
            goalA: [
                "Team Aì˜ ê³µê²©ìˆ˜ê°€ ë§ˆì¹˜ í•œ í¸ì˜ ì˜ˆìˆ ì‘í’ˆì²˜ëŸ¼ ê³¨ëŒ€ë¥¼ ê²¨ëƒ¥í•´ ì•„ë¦„ë‹¤ìš´ ìŠˆíŒ…ì„ ë‚ ë¦½ë‹ˆë‹¤!",
                "Team Aê°€ ìˆ˜ë¹„ì§„ì„ ìœ ë¦°í•˜ë©°, ê·¸ ì–´ëŠ ë•Œë³´ë‹¤ í†µì¾Œí•œ ë“ì ì„ ê¸°ë¡í•©ë‹ˆë‹¤!",
                "Team Aì˜ ì„ ìˆ˜, ìƒëŒ€ ìˆ˜ë¹„ë¥¼ ìš°ì•„í•˜ê²Œ ì œì¹˜ê³  í™˜ìƒì ì¸ ê³¨ì„ ë„£ìŠµë‹ˆë‹¤!",
                "Team Aê°€ ê°•ë ¥í•œ í¬ë¡œìŠ¤ë¥¼ ë‚ ë¦¬ë©°, ê³µì€ ê·¸ëŒ€ë¡œ ê³¨ë§ì„ í”ë“­ë‹ˆë‹¤!",
                "Team Aì˜ ê³µê²©ì´ í­í’ì²˜ëŸ¼ ëª°ì•„ì¹˜ë©°, ì •í™•í•œ ìŠˆíŒ…ìœ¼ë¡œ ì¶”ê°€ ì ìˆ˜ë¥¼ íšë“í•©ë‹ˆë‹¤!",
                "Team Aê°€ ê¸°ì  ê°™ì€ ë“œë¦¬ë¸”ë¡œ ìˆ˜ë¹„ë¥¼ ëš«ê³ , ë§ˆì¹¨ë‚´ ë“ì ì„ ì™„ì„±í•©ë‹ˆë‹¤!",
                "Team Aì˜ í™˜ìƒì ì¸ íŒ¨ìŠ¤ì›Œí¬ê°€ ì´ì–´ì§€ë©°, ê³¨ë¡œ ì—°ê²°ë˜ëŠ” ì°¬ìŠ¤ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤!",
                "Team Aì˜ ì„ ìˆ˜, ì—­ë™ì ì¸ ì›€ì§ì„ìœ¼ë¡œ ë¹ˆí‹ˆì„ ë…¸ë ¤ ë“ì ì„ ê°€ì ¸ì˜µë‹ˆë‹¤!",
                "Team Aê°€ ê°•ë ¬í•œ ì„¸íŠ¸í”¼ìŠ¤ë¥¼ í†µí•´ ìƒëŒ€ ê³¨ë§ì„ ê°€ë³ê²Œ ì°Œë¦…ë‹ˆë‹¤!",
                "Team Aì˜ ìŠˆíŒ…ì´ ê³¨ëŒ€ì— ë°•íˆë©°, ê´€ì¤‘ë“¤ì´ í™˜í˜¸ì„±ì„ ì§€ë¦…ë‹ˆë‹¤!",
                "Team Aê°€ ê¸´ë°•í•œ ìƒí™©ì—ì„œ ê¸°íšŒë¥¼ ì¡ì•„, ì°°ë‚˜ì˜ ìˆœê°„ì— ê³¨ì„ ë„£ìŠµë‹ˆë‹¤!",
                "Team Aì˜ ê³µê²©ìˆ˜ê°€ ê¸°ë¯¼í•˜ê²Œ ê³µì„ ë°›ì•„ë‚´ë©°, ë©‹ì§„ ê³¨ë¡œ ë³€í™˜í•©ë‹ˆë‹¤!",
                "Team Aê°€ ì§€í˜œë¡­ê²Œ ìƒëŒ€ì˜ ìˆ˜ë¹„ë¥¼ êµë€ì‹œí‚¤ë©° ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Aì˜ ì„ ìˆ˜ê°€ ê¸°ì ì ìœ¼ë¡œ ê³µì„ ê°„ì§í•˜ê³ , ë§ˆì¹¨ë‚´ ê³¨ë§ì„ í”ë“­ë‹ˆë‹¤!",
                "Team Aê°€ ì „í™˜ì˜ ìˆœê°„ì„ ë†“ì¹˜ì§€ ì•Šê³ , í†µì¾Œí•œ ë“ì ì„ í„°ëœ¨ë¦½ë‹ˆë‹¤!",
                "Team Aì˜ ê¸°ë§‰íŒ í˜‘ë ¥ í”Œë ˆì´ê°€ ì„±ê³¼ë¥¼ ì´ë£¨ë©°, ë©‹ì§„ ë“ì ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤!",
                "Team Aê°€ ì¡°ìš©íˆ ê¸°íšŒë¥¼ ì—¿ë³´ë‹¤, ì§œë¦¿í•œ ìŠˆíŒ…ìœ¼ë¡œ ë“ì ì„ ê°€ì ¸ê°‘ë‹ˆë‹¤!",
                "Team Aì˜ ë“œë¦¬ë¸”ì´ ìˆ˜ë¹„ìˆ˜ë¥¼ í—ˆë¬´í•˜ê²Œ ë§Œë“¤ê³ , ì´ì–´ì§€ëŠ” ë“ì ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤!",
                "Team Aì˜ ì„ ìˆ˜, ì ì¬ì ì†Œì— ìœ„ì¹˜í•´ ê°•ë ¥í•œ í—¤ë”©ìœ¼ë¡œ ê³¨ì„ ì„±ê³µì‹œí‚µë‹ˆë‹¤!",
                "Team Aê°€ í™˜ìƒì ì¸ ê°œì¸ê¸°ë¡œ ìˆ˜ë¹„ë¥¼ ì œì¹˜ê³ , ê²½ê¸°ë¥¼ ë°”ê¿‰ë‹ˆë‹¤!",
                "Team Aê°€ ê°•ë ¬í•œ ì¤‘ê±°ë¦¬ ìŠˆíŒ…ìœ¼ë¡œ ê²½ê¸°ì¥ì„ ê°€ë“ ë©”ìš´ í™˜í˜¸ë¥¼ ì´ëŒì–´ëƒ…ë‹ˆë‹¤!",
                "Team Aê°€ ê¸°ì„¸ë¥¼ ì˜¬ë¦¬ë©°, ê²°ì •ì ì¸ ìˆœê°„ì— ë“ì ì„ ì´ëŒì–´ëƒ…ë‹ˆë‹¤!",
                "Team Aì˜ í”Œë ˆì´ì–´ê°€ ì‹ ì¤‘í•˜ê²Œ ìƒí™©ì„ íŒë‹¨í•˜ê³ , ì™„ë²½í•œ ê³¨ì„ ë„£ìŠµë‹ˆë‹¤!",
                "Team Aê°€ íë¦„ì„ íƒ€ê³  ë¹ ë¥´ê²Œ ê³µê²©í•˜ë©°, ë©‹ì§„ ë“ì ì„ ì´ë£¹ë‹ˆë‹¤!",
                "Team Aì˜ ê³µê²©ìˆ˜ê°€ ê³¨ëŒ€ë¥¼ ì •ì¡°ì¤€í•˜ë©° ê°•ë ¥í•œ ìŠˆíŒ…ì„ ë‚ ë¦½ë‹ˆë‹¤!",
                "Team Aê°€ ê°„ê²°í•œ íŒ¨ìŠ¤ì™€ ì™„ë²½í•œ íƒ€ì´ë°ìœ¼ë¡œ ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Aê°€ ëë‚´ì£¼ëŠ” íŠ¸ë¦­ í”Œë ˆì´ë¡œ ë“ì ì„ ê°€ì ¸ì˜µë‹ˆë‹¤!",
                "Team Aê°€ ì„ ìˆ˜ë“¤ì˜ í˜¸í¡ì„ ë§ì¶”ë©°, ê²½ì´ë¡œìš´ ê³¨ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤!",
                "Team Aì˜ ì„ ìˆ˜, ìƒëŒ€ ìˆ˜ë¹„ë¥¼ ê°„íŒŒí•˜ê³  ì¹¨ì°©í•˜ê²Œ ë“ì í•©ë‹ˆë‹¤!",
                "Team Aê°€ ë“œë¼ë§ˆí‹±í•œ ìˆœê°„ì— ê¸°ì  ê°™ì€ ë“ì ì„ ê¸°ë¡í•©ë‹ˆë‹¤!"
            ],
            goalB: [
                "Team Bê°€ ë§ˆë²• ê°™ì€ íŒ¨ìŠ¤ë¥¼ ì´ì–´ê°€ë©°, í™˜ìƒì ì¸ ë“ì ìœ¼ë¡œ ê³¨ë¬¸ì„ í”ë“­ë‹ˆë‹¤!",
                "Team Bì˜ ê³µê²©ìˆ˜ê°€ ì ˆë¬˜í•œ ìœ„ì¹˜ì—ì„œ ë“ì ì„ ê¸°ë¡í•˜ë©° ê²½ê¸°ì¥ì— ì—´ê¸°ë¥¼ ë”í•©ë‹ˆë‹¤!",
                "Team Bê°€ íŒ€ì›Œí¬ì˜ í˜ìœ¼ë¡œ ìˆ˜ë¹„ë¥¼ ëš«ê³ , ì§œë¦¿í•œ ê³¨ì„ ì„±ê³µì‹œí‚µë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜, ìˆ˜ë¹„ì§„ì„ ìš°ì•„í•˜ê²Œ ì œì¹˜ê³  ë§ˆì¹¨ë‚´ ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Bê°€ ê°•ë ¥í•œ í¬ë¡œìŠ¤ë¥¼ ë‚ ë¦¬ë©°, ê³µì€ ê·¸ëŒ€ë¡œ ê³¨ë§ì„ ê°ˆë¼ë†“ìŠµë‹ˆë‹¤!",
                "Team Bì˜ ê³µê²©ì´ ìˆœì‹ê°„ì— í¼ì³ì§€ë©°, ê´€ì¤‘ë“¤ì„ ë†€ë¼ê²Œ í•  ë§Œí•œ ë“ì ì´ ë‚˜ì˜µë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜ê°€ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ì•Šê³  ê°•ë ¥í•œ ìŠˆíŒ…ìœ¼ë¡œ ê³¨ì„ ë„£ìŠµë‹ˆë‹¤!",
                "Team Bê°€ ìƒëŒ€ì˜ ìˆ˜ë¹„ë¥¼ ë¬´ë„ˆëœ¨ë¦¬ë©° ë©‹ì§„ í˜‘ë ¥ìœ¼ë¡œ ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Bì˜ ê¸°ìŠµì ì¸ ê³µê²©ì´ ì ì¬ì ì†Œì— ì´ë£¨ì–´ì ¸, ë“ì ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤!",
                "Team Bê°€ ë¹ ë¥¸ íŒ¨ìŠ¤ì™€ ê¸°ë¯¼í•œ ì›€ì§ì„ìœ¼ë¡œ ê³¨ëŒ€ë¥¼ ì •ì¡°ì¤€í•©ë‹ˆë‹¤!",
                "Team Bì˜ ê³µê²©ìˆ˜ê°€ ê¸°ì ì ì¸ ìˆœê°„ì— ê³¨ì„ ì„±ê³µì‹œì¼œ ê²½ê¸°ì˜ íë¦„ì„ ë°”ê¿‰ë‹ˆë‹¤!",
                "Team Bê°€ ì ˆë¬˜í•œ ë“œë¦¬ë¸”ë¡œ ìˆ˜ë¹„ìˆ˜ë¥¼ ë”°ëŒë¦¬ë©° ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜, ì™„ë²½í•œ íƒ€ì´ë°ìœ¼ë¡œ ê³µì„ ë°›ì•„ë‚´ê³  ë©‹ì§„ ê³¨ì„ ë„£ìŠµë‹ˆë‹¤!",
                "Team Bê°€ ê°•ë ¥í•œ ì¤‘ê±°ë¦¬ ìŠˆíŒ…ìœ¼ë¡œ ê´€ì¤‘ì˜ í™˜í˜¸ë¥¼ ì´ëŒì–´ëƒ…ë‹ˆë‹¤!",
                "Team Bê°€ ì„¸íŠ¸í”¼ìŠ¤ë¥¼ ì´ìš©í•´ ì¡°ìš©íˆ ë“ì ì˜ ê¸°íšŒë¥¼ ì¡ìŠµë‹ˆë‹¤!",
                "Team Bê°€ ê²½ê¸°ë¥¼ ì§€ë°°í•˜ë©° ìˆ˜ë¹„ë¥¼ ëš«ê³  êµ³ê±´í•œ ë“ì ì„ ì˜¬ë¦½ë‹ˆë‹¤!",
                "Team Bì˜ ê³µê²©ìˆ˜ê°€ ìˆœì‹ê°„ì— ìˆ˜ë¹„ë¥¼ ëš«ê³ , ì™„ë²½í•œ ê³¨ì„ ê¸°ë¡í•©ë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜, ë‚ ì¹´ë¡œìš´ ìŠˆíŒ…ìœ¼ë¡œ ê²½ê¸°ë¥¼ í”ë“œëŠ” ìˆœê°„ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤!",
                "Team Bê°€ êµì²´ ì„ ìˆ˜ì˜ í™œì•½ìœ¼ë¡œ ì¤‘ìš”í•œ ìˆœê°„ì— ë“ì ì„ ì„±ê³µì‹œí‚µë‹ˆë‹¤!",
                "Team Bê°€ ë“œë¼ë§ˆí‹±í•œ ì—­ìŠµìœ¼ë¡œ ê³¨ë¬¸ì„ ì—´ë©° ë“ì ì„ ê°€ì ¸ê°‘ë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜, ì§‘ì¤‘ë ¥ì„ ìƒì§€ ì•Šê³  ë§ˆì¹¨ë‚´ ë“ì ì„ ì˜¬ë¦½ë‹ˆë‹¤!",
                "Team Bê°€ ëŠì„ì—†ì´ ê³µê²©ì„ ì‹œë„í•˜ë©° ê³¨ëŒ€ë¥¼ ìœ„í˜‘í•©ë‹ˆë‹¤!",
                "Team Bê°€ ê¸°ì  ê°™ì€ ì—°ê³„ í”Œë ˆì´ë¡œ ê²½ê¸°ì¥ì„ ì—´ê´‘ì‹œí‚¤ë©° ë“ì í•©ë‹ˆë‹¤!",
                "Team Bì˜ ê³µê²©ì´ í•œ ë²ˆì˜ ì°¬ìŠ¤ë„ ë†“ì¹˜ì§€ ì•Šê³ , ê·€ì¤‘í•œ ê³¨ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤!",
                "Team Bê°€ ì „ìˆ ì ì¸ ì›€ì§ì„ìœ¼ë¡œ ìˆ˜ë¹„ë¥¼ ëš«ê³  ë“ì í•©ë‹ˆë‹¤!",
                "Team Bì˜ ì„ ìˆ˜, ê°•ë ¬í•œ í—¤ë”©ìœ¼ë¡œ ê³¨ëŒ€ë¥¼ ì •í†µìœ¼ë¡œ ê°€ê²©í•©ë‹ˆë‹¤!",
                "Team Bê°€ íŒ€ì˜ ì‘ì§‘ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ í™˜ìƒì ì¸ ê³¨ì„ ì˜¬ë¦½ë‹ˆë‹¤!",
                "Team Bê°€ ì˜ˆë¦¬í•œ ìŠˆíŒ…ìœ¼ë¡œ ê´€ì¤‘ì˜ ê°€ìŠ´ì„ ë›°ê²Œ í•©ë‹ˆë‹¤!",
                "Team Bì˜ ë“œë¦¬ë¸”ì´ ë§ˆì¹˜ ë§ˆìˆ ì²˜ëŸ¼ ìˆ˜ë¹„ë¥¼ í’€ì–´ë‚´ë©° ë“ì ì— ì„±ê³µí•©ë‹ˆë‹¤!",
                "Team Bê°€ ê°•ë ¥í•œ í”¼ì§€ì»¬ë¡œ ìƒëŒ€ì˜ ë°©ì–´ë¥¼ ì œì••í•˜ë©° ë“ì í•©ë‹ˆë‹¤!"
            ],
            noGoal: [
                "Team Aì™€ Team Bê°€ íŒ½íŒ½í•œ ì ‘ì „ ì†ì—ì„œ ëŒ€ì¹˜í•˜ë©°, ê²½ê¸°ì¥ì—ëŠ” ê¸´ì¥ê°ì´ ê°ë•ë‹ˆë‹¤!",
                "ì–‘ íŒ€ ì„ ìˆ˜ë“¤ì´ ëª¸ì‹¸ì›€ì„ ë²Œì´ë©°, ëœ¨ê±°ìš´ ì—´ê¸° ì†ì—ì„œ ëŒ€ê²°ì„ ì´ì–´ê°‘ë‹ˆë‹¤!",
                "Team Aì™€ Team Bê°€ ì„œë¡œì˜ ê³µê²©ì„ ë°©ì–´í•˜ë©°, ë¶ˆê½ƒ íŠ€ëŠ” ê³µë°©ì „ì„ í¼ì¹©ë‹ˆë‹¤!",
                "íŒ€ ê°„ì˜ ì‹¬ë¦¬ì „ì´ ê·¹ëŒ€í™”ë˜ë©°, ê²½ê¸°ì¥ì€ ì ì  ë” ëœ¨ê±°ì›Œì§€ê³  ìˆìŠµë‹ˆë‹¤!",
                "Team Aì˜ ìˆ˜ë¹„ê°€ Team Bì˜ ê¸°ìŠµì ì¸ ê³µê²©ì„ ì €ì§€í•˜ë©° ì¹˜ì—´í•œ ëŒ€ê²°ì´ ì´ì–´ì§‘ë‹ˆë‹¤!",
                "Team Bê°€ Team Aì˜ ë¹ˆí‹ˆì„ ì°¾ê¸° ìœ„í•´ ì§‘ìš”í•˜ê²Œ ì••ë°•ì„ ê°€í•©ë‹ˆë‹¤!",
                "ì–‘ íŒ€ì˜ ì„ ìˆ˜ë“¤ì´ ì €ë§ˆë‹¤ì˜ ì „ìˆ ì„ êµ¬ì‚¬í•˜ë©° ê²©ë ¬í•œ ëŒ€ì¹˜ë¥¼ ì´ì–´ê°‘ë‹ˆë‹¤!",
                "Team Aì˜ ìˆ˜ë¹„ê°€ Team Bì˜ ê³µê²©ì„ ì €ì§€í•˜ê¸° ìœ„í•´ ì˜¨ í˜ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤!",
                "Team Bê°€ ëŠì„ì—†ëŠ” íŒ¨ìŠ¤ë¡œ Team Aì˜ ìˆ˜ë¹„ë¥¼ í”ë“¤ì–´ ë†“ìŠµë‹ˆë‹¤!",
                "ê²½ê¸°ì¥ì€ ì–‘ íŒ€ì˜ ì„ ìˆ˜ë“¤ì´ ê³µì„ ì°¨ì§€í•˜ê¸° ìœ„í•´ ëª¸ì„ ë˜ì§€ëŠ” ì—´ì „ìœ¼ë¡œ ê°€ë“í•©ë‹ˆë‹¤!",
                "Team Aì˜ ê³µê²©ìˆ˜ê°€ ë¯¸ì„¸í•œ ê³µê°„ì„ ë…¸ë¦¬ë©°, ê¸°íšŒë¥¼ ì—¿ë³´ê³  ìˆìŠµë‹ˆë‹¤!",
                "Team Bê°€ Team Aì˜ ìˆ˜ë¹„ë¥¼ íœ˜ì “ê³  ë‹¤ë‹ˆë©° ìœ„í˜‘ì ì¸ ì¥ë©´ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤!",
                "ì–‘ íŒ€ì˜ ì„ ìˆ˜ë“¤ì´ ì£¼ì–´ì§„ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ì•Šê¸° ìœ„í•´ ê¸´ì¥ê°ì„ ë†’ì´ê³  ìˆìŠµë‹ˆë‹¤!",
                "Team Aê°€ ê°•ë ¥í•œ ì••ë°•ì„ ê°€í•˜ë©° Team Bì˜ ê³µê²©ì„ ì €ì§€í•©ë‹ˆë‹¤!",
                "Team Bê°€ ìƒëŒ€ì˜ ì•½ì ì„ íŒŒì•…í•˜ë ¤ ì• ì“°ë©° ê²½ê¸°ë¥¼ ì´ì–´ê°‘ë‹ˆë‹¤!",
                "ì–‘ íŒ€ì˜ ì„ ìˆ˜ë“¤ì´ ì„œë¡œì˜ ì›€ì§ì„ì„ ì˜ˆì˜ì£¼ì‹œí•˜ë©° ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•©ë‹ˆë‹¤!",
                "Team Aì˜ ê³µê²©ì´ Team Bì˜ ìˆ˜ë¹„ë¥¼ ê²¨ëƒ¥í•˜ë©° í˜ì°¨ê²Œ ë‹¤ê°€ì˜µë‹ˆë‹¤!",
                "Team Bê°€ ì €ëŒì ì¸ ê³µê²©ìœ¼ë¡œ Team Aì˜ ìˆ˜ë¹„ë¥¼ ê´´ë¡­í™ë‹ˆë‹¤!",
                "ê²½ê¸°ì¥ì€ íŒ½íŒ½í•œ ê¸´ì¥ê°ìœ¼ë¡œ ê°€ë“ ì°¨ ìˆìœ¼ë©°, ì–´ëŠ íŒ€ì´ ë¨¼ì € ê¸°íšŒë¥¼ ì¡ì„ì§€ ëª¨ë¦…ë‹ˆë‹¤!",
                "Team Aì™€ Team Bì˜ ì„ ìˆ˜ë“¤ì´ ì„œë¡œë¥¼ íƒìƒ‰í•˜ë©° ìˆœê°„ì˜ ê¸°íšŒë¥¼ ë…¸ë¦¬ê³  ìˆìŠµë‹ˆë‹¤!"
            ],
            extraTime: [
                "ğŸ™ï¸: 90ë¶„ ê²½ê¸°ê°€ ëë‚¬ì§€ë§Œ ìŠ¹ë¶€ë¥¼ ê°€ë¦¬ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì—°ì¥ì „ìœ¼ë¡œ ëŒì…í•©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Aì™€ Team B, ì—°ì¥ì „ì—ì„œ ìŠ¹ë¶€ë¥¼ ê°€ë¦¬ê²Œ ë©ë‹ˆë‹¤!",
                "ğŸ™ï¸: íŒ½íŒ½í•œ ì ‘ì „ ëì— ì—°ì¥ì „ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤. ëˆ„ê°€ ìŠ¹ë¦¬ì˜ ì—¬ì‹ ì„ ì¡ì„ê¹Œìš”?",
                "ğŸ™ï¸: ì •ê·œ ì‹œê°„ ë™ì•ˆ ìŠ¹ë¶€ë¥¼ ê°€ë¦¬ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì—°ì¥ì „ì—ì„œ ìš´ëª…ì´ ê°ˆë¦½ë‹ˆë‹¤!",
                "ğŸ™ï¸: ì–‘ íŒ€ ëª¨ë‘ ì§€ì¹˜ì§€ ì•Šê³  ì—°ì¥ì „ì— ëŒì…í•©ë‹ˆë‹¤. ëˆ„êµ¬ì˜ ì²´ë ¥ì´ ë” ë²„í‹¸ê¹Œìš”?"
            ],
            penaltyShootout: [
                "ğŸ™ï¸: ì—°ì¥ì „ì—ì„œë„ ìŠ¹ë¶€ë¥¼ ê°€ë¦¬ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìŠ¹ë¶€ì°¨ê¸°ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤!",
                "ğŸ™ï¸: ìš´ëª…ì˜ ìŠ¹ë¶€ì°¨ê¸°! Team Aì™€ Team B, ëˆ„êµ¬ì˜ ì†ì„ ë“¤ì–´ì¤„ê¹Œìš”?",
                "ğŸ™ï¸: 120ë¶„ì˜ í˜ˆíˆ¬ ëì— ìŠ¹ë¶€ì°¨ê¸°ë¡œ ìµœì¢… ìŠ¹ìë¥¼ ê°€ë¦½ë‹ˆë‹¤!",
                "ğŸ™ï¸: ê¸´ì¥ê° ë„˜ì¹˜ëŠ” ìŠ¹ë¶€ì°¨ê¸°ì˜ ìˆœê°„ì…ë‹ˆë‹¤. ì„ ìˆ˜ë“¤ì˜ ê°„ë‹´ì´ ì„œëŠ˜í•´ì§‘ë‹ˆë‹¤!",
                "ğŸ™ï¸: ê³¨í‚¤í¼ì™€ í‚¤ì»¤ì˜ 1:1 ëŒ€ê²°, ìŠ¹ë¶€ì°¨ê¸°ê°€ ì‹œì‘ë©ë‹ˆë‹¤!"
            ],
            winA: [
                "ğŸ™ï¸: Team Aê°€ ì‹œì›í•œ ê³¨ë¡œ ê²½ê¸°ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ìŠ¹ë¦¬ë¥¼ ìŸì·¨í•©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Aì˜ í™˜ìƒì ì¸ í”Œë ˆì´ê°€ ë¹›ì„ ë°œí•˜ë©°, ê²°êµ­ ìŠ¹ë¦¬ì˜ ìˆœê°„ì„ ë§ì´í•©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Aê°€ ì§€ì¹˜ì§€ ì•Šê³  ëŠì„ì—†ì´ ê³µê²©í•˜ë©° ê²½ê¸°ì˜ ìŠ¹ìê°€ ë©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Aê°€ ëª¨ë“  ê²ƒì„ ìŸì•„ë¶€ìœ¼ë©°, ê°•ë ¬í•œ ìŠ¹ë¦¬ë¥¼ ê°€ì ¸ê°‘ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Aê°€ ë§ˆì§€ë§‰ ìˆœê°„ê¹Œì§€ ì§‘ì¤‘ë ¥ì„ ìƒì§€ ì•Šìœ¼ë©°, ì¾ŒìŠ¹ì„ ê±°ë‘¡ë‹ˆë‹¤!"
            ],
            winB: [
                "ğŸ™ï¸: Team Bê°€ ì••ë„ì ì¸ ê²½ê¸°ë ¥ìœ¼ë¡œ Team Aë¥¼ ë¬´ë„ˆëœ¨ë¦¬ê³ , ìŠ¹ë¦¬ë¥¼ ìŸì·¨í•©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Bì˜ í”Œë ˆì´ê°€ íŒ€ì˜ ì‚¬ê¸°ë¥¼ ëŒì–´ì˜¬ë¦¬ë©°, ê²½ê¸°ë¥¼ ë§ˆë¬´ë¦¬ì§“ìŠµë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Bê°€ ë§ˆì§€ë§‰ ìˆœê°„ê¹Œì§€ ìµœì„ ì„ ë‹¤í•˜ë©°, ê¸°ì  ê°™ì€ ìŠ¹ë¦¬ë¥¼ ê±°ë‘ì—ˆìŠµë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Bì˜ ì„ ìˆ˜ë“¤ì´ í™˜ìƒì ì¸ í”Œë ˆì´ë¡œ ìŠ¹ë¦¬ì˜ ê¸°ì¨ì„ ë§Œë½í•©ë‹ˆë‹¤!",
                "ğŸ™ï¸: Team Bê°€ ëˆì§ˆê¸´ ë…¸ë ¥ìœ¼ë¡œ ê²½ê¸°ë¥¼ ì§€ë°°í•˜ë©°, ë‹¹ë‹¹í•œ ìŠ¹ë¦¬ë¥¼ ì´ë£¹ë‹ˆë‹¤!"
            ]
        };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function generateMatchups() {
            shuffleArray(teams);
            const matchups = [];
            for (let i = 0; i < teams.length; i += 2) {
                matchups.push({
                    teamA: teams[i],
                    teamB: teams[i + 1],
                    oddsA: Math.random() * 0.5 + 0.25,
                    oddsB: 0
                });
                matchups[matchups.length - 1].oddsB = 1 - matchups[matchups.length - 1].oddsA;
            }
            return matchups;
        }

        function updateMatchDisplay() {
            document.getElementById('team-a-icon').textContent = currentMatch.teamA.icon;
            document.getElementById('team-a-name').textContent = currentMatch.teamA.name;
            document.getElementById('team-a-odds').textContent = (currentMatch.oddsA * 100).toFixed(1);
            document.getElementById('team-b-icon').textContent = currentMatch.teamB.icon;
            document.getElementById('team-b-name').textContent = currentMatch.teamB.name;
            document.getElementById('team-b-odds').textContent = (currentMatch.oddsB * 100).toFixed(1);

            const betWinner = document.getElementById('bet-winner');
            betWinner.innerHTML = '<option value="">ìŠ¹ë¶€ì˜ˆì¸¡! ìŠ¹ìëŠ”?</option>';
            betWinner.innerHTML += `<option value="A">${currentMatch.teamA.icon}${currentMatch.teamA.name} x${(1 / currentMatch.oddsA).toFixed(3)}</option>`;
            betWinner.innerHTML += `<option value="B">${currentMatch.teamB.icon}${currentMatch.teamB.name} x${(1 / currentMatch.oddsB).toFixed(3)}</option>`;

            document.getElementById('bet-amount').value = '';
            document.getElementById('expected-profit').textContent = '0';
            document.getElementById('start-match').disabled = true;
            document.getElementById('start-match').textContent = 'ìŠ¹ë¶€ë¥¼ ì˜ˆì¸¡í•˜ê³  ê¸ˆì•¡ì„ ë°°íŒ…í•˜ì„¸ìš”!';
            
            document.getElementById('team-a-score').textContent = '0';
            document.getElementById('team-b-score').textContent = '0';
            
            isMatchEnded = false;
            usedCommentaries.clear();
        }

        function updateBalance() {
            document.getElementById('balance').textContent = balance.toLocaleString();
        }

        function calculateExpectedProfit() {
            if (isMatchEnded) return;
            
            const betWinner = document.getElementById('bet-winner').value;
            const betAmount = parseInt(document.getElementById('bet-amount').value) || 0;
            let multiplier = 0;

            if (betWinner === 'A') {
                multiplier = 1 / currentMatch.oddsA;
            } else if (betWinner === 'B') {
                multiplier = 1 / currentMatch.oddsB;
            }

            const expectedProfit = Math.floor(betAmount * multiplier);
            document.getElementById('expected-profit').textContent = expectedProfit.toLocaleString();

            const startMatchButton = document.getElementById('start-match');
            if (betWinner && betAmount > 0 && betAmount <= balance) {
                startMatchButton.disabled = false;
                startMatchButton.textContent = 'ê²½ê¸° ì‹œì‘!';
            } else {
                startMatchButton.disabled = true;
                startMatchButton.textContent = 'ìŠ¹ë¶€ë¥¼ ì˜ˆì¸¡í•˜ê³  ê¸ˆì•¡ì„ ë°°íŒ…í•˜ì„¸ìš”!';
            }
        }

        function getRandomCommentary(type) {
            const texts = commentaryTexts[type];
            let availableTexts = texts.filter(text => !usedCommentaries.has(text));
            
            if (availableTexts.length === 0) {
                usedCommentaries.clear();
                availableTexts = texts;
            }
            
            const selectedText = availableTexts[Math.floor(Math.random() * availableTexts.length)];
            usedCommentaries.add(selectedText);
            return selectedText;
        }

        function simulateMatch() {
    const totalTime = 60; 
    const updateInterval = 2000; 
    const totalUpdates = totalTime / 2;
    
    let currentUpdate = 0;
    let scoreA = 0;
    let scoreB = 0;

    const commentaryBox = document.getElementById('commentary');
    const progressBar = document.getElementById('progress');
    
    // ê²½ê¸° ì‹œì‘ í‚¥ì˜¤í”„ ì½”ë©˜íŠ¸ ì¶œë ¥
    commentaryBox.innerHTML += `<p class="highlight">${getRandomCommentary('kickoff')
        .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
        .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</p><br>`;
    
    commentaryBox.scrollTop = commentaryBox.scrollHeight;
    
    const matchInterval = setInterval(() => {
        currentUpdate++;
        
        const eventProbability = Math.random();
        if (eventProbability < 0.05) { 
            if (Math.random() < currentMatch.oddsA) {
                scoreA++;
                commentaryBox.innerHTML += `<strong>${getRandomCommentary('goalA').replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)}</strong><br><br>`;
            } else {
                scoreB++;
                commentaryBox.innerHTML += `<strong>${getRandomCommentary('goalB').replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</strong><br><br>`;
            }
            document.getElementById('team-a-score').textContent = scoreA;
            document.getElementById('team-b-score').textContent = scoreB;
        } else {
            commentaryBox.innerHTML += getRandomCommentary('noGoal')
                .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
                .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name) + '<br><br>';
        }

        commentaryBox.scrollTop = commentaryBox.scrollHeight;
        
        const progress = (currentUpdate / totalUpdates) * 100;
        progressBar.style.width = progress + '%';

        if (currentUpdate >= totalUpdates) {
            clearInterval(matchInterval);
            if (scoreA === scoreB) {
                simulateExtraTime(scoreA, scoreB);
            } else {
                endMatch(scoreA, scoreB);
            }
        }
    }, updateInterval);
}

function simulateExtraTime(scoreA, scoreB) {
    const commentaryBox = document.getElementById('commentary');
    
    // ì—°ì¥ì „ ì‹œì‘ ì½”ë©˜íŠ¸ ì¶œë ¥
    commentaryBox.innerHTML += `<p class="highlight">${getRandomCommentary('extraTime')
        .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
        .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</p><br>`;
    
    commentaryBox.scrollTop = commentaryBox.scrollHeight;
    
    const totalTime = 20;
    const updateInterval = 1500;
    const totalUpdates = totalTime / 2;
    
    let currentUpdate = 0;

    setTimeout(() => {
        const extraTimeInterval = setInterval(() => {
            currentUpdate++;
            
            const eventProbability = Math.random();
            if (eventProbability < 0.07) { 
                if (Math.random() < currentMatch.oddsA) {
                    scoreA++;
                    commentaryBox.innerHTML += `<strong>${getRandomCommentary('goalA').replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)}</strong><br><br>`;
                } else {
                    scoreB++;
                    commentaryBox.innerHTML += `<strong>${getRandomCommentary('goalB').replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</strong><br><br>`;
                }
                document.getElementById('team-a-score').textContent = scoreA;
                document.getElementById('team-b-score').textContent = scoreB;

                // ë“ì í•´ë„ ê²½ê¸°ë¥¼ ì¢…ë£Œí•˜ì§€ ì•Šê³  ê³„ì† ì§„í–‰
            }

            commentaryBox.innerHTML += getRandomCommentary('noGoal')
                .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
                .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name) + '<br><br>';
            commentaryBox.scrollTop = commentaryBox.scrollHeight;

            // ëª¨ë“  ì—°ì¥ì „ ì‹œê°„ì´ ëë‚˜ì•¼ë§Œ ê²½ê¸°ë¥¼ ì¢…ë£Œ
            if (currentUpdate >= totalUpdates) {
                clearInterval(extraTimeInterval);
                if (scoreA === scoreB) {
                    simulatePenaltyShootout(scoreA, scoreB); // ìŠ¹ë¶€ì°¨ê¸° ì§„í–‰
                } else {
                    endMatch(scoreA, scoreB, false); // ì—°ì¥ì „ ì¢…ë£Œ
                }
            }
        }, updateInterval);
    }, 2000); // ì—°ì¥ì „ ì‹œì‘ í›„ 2ì´ˆ ëŒ€ê¸°
}

function simulatePenaltyShootout(scoreA, scoreB) {
    const commentaryBox = document.getElementById('commentary');
    
    // ìŠ¹ë¶€ì°¨ê¸° ì‹œì‘ í…ìŠ¤íŠ¸ ì¶œë ¥
    commentaryBox.innerHTML += `<p class="highlight">${getRandomCommentary('penaltyShootout')
        .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
        .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</p><br>`;
    
    commentaryBox.scrollTop = commentaryBox.scrollHeight;

    // 2ì´ˆ ëŒ€ê¸° í›„ ìŠ¹ë¶€ì°¨ê¸° ì½”ë©˜í„°ë¦¬ ì¶œë ¥
    setTimeout(() => {
        let penaltyScoreA = 0;
        let penaltyScoreB = 0;
        let round = 0;

        const penaltyInterval = setInterval(() => {
            round++;
            if (Math.random() < 0.75) penaltyScoreA++; // 75% í™•ë¥ ë¡œ Team A ì„±ê³µ
            if (Math.random() < 0.75) penaltyScoreB++; // 75% í™•ë¥ ë¡œ Team B ì„±ê³µ

            commentaryBox.innerHTML += `${round}ë¼ìš´ë“œ - ${currentMatch.teamA.icon}${currentMatch.teamA.name} ${penaltyScoreA}:${penaltyScoreB} ${currentMatch.teamB.icon}${currentMatch.teamB.name}<br><br>`;
            commentaryBox.scrollTop = commentaryBox.scrollHeight;

            // 5ë¼ìš´ë“œ ì´ìƒ ì‹œ ë“ì  ì°¨ì´ê°€ ë‚˜ë©´ ìŠ¹ë¶€ì°¨ê¸° ì¢…ë£Œ
            if (round >= 5 && Math.abs(penaltyScoreA - penaltyScoreB) > 0) {
                clearInterval(penaltyInterval);
                endMatch(scoreA, scoreB, true, penaltyScoreA, penaltyScoreB);
            }
        }, 2000); // ìŠ¹ë¶€ì°¨ê¸° ê°„ê²© 2ì´ˆ
    }, 2000); // í˜ë„í‹°í‚¥ ì‹œì‘ í…ìŠ¤íŠ¸ í›„ 2ì´ˆ ëŒ€ê¸°
}

function endMatch(scoreA, scoreB, isPenalty = false, penaltyScoreA = 0, penaltyScoreB = 0) {
    isMatchEnded = true;
    const betWinner = document.getElementById('bet-winner').value;
    const betAmount = parseInt(document.getElementById('bet-amount').value);

    let result = '';
    // ìŠ¹ë¶€ì°¨ê¸°ì¼ ê²½ìš° ìŠ¹ë¶€ì°¨ê¸° ì ìˆ˜ë¡œ ìŠ¹íŒ¨ ê²°ì •
    if (isPenalty) {
        if (penaltyScoreA > penaltyScoreB) {
            result = 'A';  // Team Aê°€ ìŠ¹ë¦¬
        } else {
            result = 'B';  // Team Bê°€ ìŠ¹ë¦¬
        }
    } else { // ì¼ë°˜ ê²½ê¸°ë‚˜ ì—°ì¥ì „ì¼ ê²½ìš° ë“ì ìœ¼ë¡œ ìŠ¹íŒ¨ ê²°ì •
        if (scoreA > scoreB) {
            result = 'A';
        } else {
            result = 'B';
        }
    }

    const commentaryBox = document.getElementById('commentary');
    let commentary = '';

    // ìŠ¹ë¦¬í•œ íŒ€ì— ë”°ë¼ ì½”ë©˜íŠ¸ ë‹¤ë¥´ê²Œ ì¶œë ¥
    if (result === 'A') {
        commentary = getRandomCommentary('winA');
    } else {
        commentary = getRandomCommentary('winB');
    }

    commentaryBox.innerHTML += `<strong>${commentary
        .replace('Team A', currentMatch.teamA.icon + currentMatch.teamA.name)
        .replace('Team B', currentMatch.teamB.icon + currentMatch.teamB.name)}</strong><br><br>`;

    let profit = 0;
    if (result === betWinner) {
        commentaryBox.style.backgroundColor = '#90EE90';
        commentaryBox.innerHTML += '<strong>ì˜ˆì¸¡ ì„±ê³µ!</strong><br><br>';
        profit = Math.floor(betAmount * (1 / (result === 'A' ? currentMatch.oddsA : currentMatch.oddsB)));
        balance += profit;
        updateBalance();
    } else {
        commentaryBox.style.backgroundColor = '#FFCCCB';
        commentaryBox.innerHTML += '<strong>ì˜ˆì¸¡ ì‹¤íŒ¨!</strong><br><br>';
        profit = -betAmount;
    }

    const archiveEntry = document.createElement('div');
    archiveEntry.className = result === betWinner ? 'success' : 'failure';
    let scoreDisplay = `${scoreA} : ${scoreB}`;
    if (isPenalty) {
        scoreDisplay = `${penaltyScoreA} : ${penaltyScoreB}`; // ìŠ¹ë¶€ì°¨ê¸°ì¼ ê²½ìš° ìŠ¹ë¶€ì°¨ê¸° ì ìˆ˜ í‘œì‹œ
    }
    archiveEntry.innerHTML = `
        <strong>${currentRound === 4 ? 'ì¤€ê²°ìŠ¹' : (currentRound === 2 ? 'ê²°ìŠ¹' : `${currentRound}ê°•`)} ${currentRound === 2 ? '' : currentMatchNumber + 'ì°¨ì „'}</strong><br>
        <strong>${currentMatch.teamA.icon}${currentMatch.teamA.name} ${scoreDisplay} ${currentMatch.teamB.icon}${currentMatch.teamB.name} ${isPenalty ? '(ìŠ¹ë¶€ì°¨ê¸°)' : ''}</strong><br>
        ì˜ˆì¸¡: ${betWinner === 'A' ? currentMatch.teamA.name : currentMatch.teamB.name}<br>
        ë°°íŒ…: â‚©${betAmount.toLocaleString()}<br>
        ê²°ê³¼: ${result === betWinner ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}<br>
        ìˆ˜ìµ: â‚©${profit.toLocaleString()}<br>
        ì”ì•¡: â‚©${balance.toLocaleString()}
    `;
    document.getElementById('archive').prepend(archiveEntry);

    document.getElementById('bet-winner').disabled = true;
    document.getElementById('bet-amount').disabled = true;
    document.getElementById('start-match').disabled = false;
    document.getElementById('start-match').textContent = 'ë‹¤ìŒ ê²½ê¸°';

    if (balance <= 0) {
        alert('ì „ì¬ì‚° íƒ•ì§„! ê²Œì„ ì˜¤ë²„!');
        document.getElementById('start-match').disabled = true;
    }

    currentMatch.winner = result === 'A' ? currentMatch.teamA : currentMatch.teamB;
}

        function startNextRound() {
            if (currentRound === 2) {
                alert(`ê²°ìŠ¹ì „ ì¢…ë£Œ! ìµœì¢… ì”ì•¡: â‚©${balance.toLocaleString()}`);
                document.getElementById('start-match').disabled = true;
                return;
            }

            currentRound /= 2;
            currentMatchNumber = 1;
            matchups = [];

            for (let i = 0; i < matchHistory.length; i += 2) {
                const winner1 = matchHistory[i].winner;
                const winner2 = matchHistory[i + 1].winner;
                const newMatch = {
                    teamA: winner1,
                    teamB: winner2,
                    oddsA: Math.random() * 0.5 + 0.25,
                    oddsB: 0
                };
                newMatch.oddsB = 1 - newMatch.oddsA;
                matchups.push(newMatch);
            }

            matchHistory = [];
            currentMatch = matchups[0];
            updateMatchDisplay();
            document.getElementById('commentary').innerHTML = '';
            document.getElementById('commentary').style.backgroundColor = '';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('match-info').textContent = `${currentRound === 4 ? 'ì¤€ê²°ìŠ¹' : (currentRound === 2 ? 'ê²°ìŠ¹' : `${currentRound}ê°•`)} ${currentRound === 2 ? '' : currentMatchNumber + 'ì°¨ì „'}`;
            document.getElementById('bet-winner').disabled = false;
            document.getElementById('bet-amount').disabled = false;
        }

        // ì´ˆê¸°í™”
        matchups = generateMatchups();
        currentMatch = matchups[0];
        updateMatchDisplay();
        updateBalance();

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('bet-winner').addEventListener('change', calculateExpectedProfit);
        document.getElementById('bet-amount').addEventListener('input', calculateExpectedProfit);
        document.getElementById('start-match').addEventListener('click', () => {
            if (isMatchEnded) {
                matchHistory.push(currentMatch);
                currentMatchNumber++;
                if (currentMatchNumber > currentRound / 2) {
                    startNextRound();
                } else {
                    currentMatch = matchups[currentMatchNumber - 1];
                    updateMatchDisplay();
                    document.getElementById('commentary').innerHTML = '';
                    document.getElementById('commentary').style.backgroundColor = '';
                    document.getElementById('progress').style.width = '0%';
                    document.getElementById('match-info').textContent = `${currentRound === 4 ? 'ì¤€ê²°ìŠ¹' : (currentRound === 2 ? 'ê²°ìŠ¹' : `${currentRound}ê°•`)} ${currentRound === 2 ? '' : currentMatchNumber + 'ì°¨ì „'}`;
                    document.getElementById('bet-winner').disabled = false;
                    document.getElementById('bet-amount').disabled = false;
                }
            } else {
                const betAmount = parseInt(document.getElementById('bet-amount').value);
                balance -= betAmount;
                updateBalance();
                document.getElementById('bet-winner').disabled = true;
                document.getElementById('bet-amount').disabled = true;
                document.getElementById('start-match').disabled = true;
                simulateMatch();
            }
        });

        // ë°°ê²½ ìŒì•… ìë™ ì¬ìƒ ì²˜ë¦¬
        const backgroundMusic = document.getElementById('background-music');
        backgroundMusic.volume = 0.3; 
        document.addEventListener('DOMContentLoaded', () => {
            backgroundMusic.play().catch(error => {
                console.log("Audio playback failed:", error);
            });
        });
    </script>
    <script>
        // í˜ì´ì§€ í´ë¦­ ì‹œ ë°°ê²½ìŒì•… ì¬ìƒ ì²˜ë¦¬
        document.body.addEventListener('click', () => {
            const backgroundMusic = document.getElementById('background-music');
            backgroundMusic.play().catch(error => {
                console.log("Audio playback failed:", error);
            });
        });
    </script>
</body>
</html>
