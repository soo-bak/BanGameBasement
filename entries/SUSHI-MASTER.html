<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sushi Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap" rel="stylesheet">
    
    <audio id="bgm" loop autoplay>
        <source src="https://www.televisiontunes.com/uploads/audio/Jaws.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #game-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .gauge-container {
    width: 100%;
    height: 20px;
    background-color: #ddd;
    position: relative;
    margin-bottom: 10px;
}
.gauge {
    height: 100%;
    width: 0;
    background-color: #4CAF50;
    transition: width 0.1s;
}
.gauge-value {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    color: #000;
    background-color: rgba(255, 255, 255, 0.7);
    padding: 2px 4px;
    border-radius: 2px;
}
        .gauge-label {
            position: absolute;
            right: 5px;
            top: 0;
            font-size: 12px;
        }
        #reputation-gauge {
            width: 100%;
            height: 10px;
            background-color: #ddd;
            margin-top: 5px;
        }
        #reputation-progress {
            height: 100%;
            width: 0;
            background-color: #4CAF50;
        }
        #customer-info {
    background-color: #f0f0f0;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
}

.customer-header {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
}

.customer-info {
    display: flex;
    background-color: #f0f0f0;
    padding: 15px;
    border-radius: 5px;
    margin-top: 30px;
    margin-bottom: 15px;
    align-items: flex-start;
}

.customer-avatar {
    background-color: #ddd;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    overflow: hidden;
}

.customer-emoji {
    font-size: 40px;
    line-height: 1;
}

.customer-name {
    font-weight: bold;
    margin-bottom: 5px;
    align-self: flex-start;
    width: 100%;
}

.customer-order {
    font-style: italic;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: left;
    align-self: stretch;
    width: 100%;
}

.customer-price {
    text-align: left;
    margin: 2px 0;
    width: 100%;
    align-self: flex-end;
}

.customer-taste {
    text-align: left;
    margin: 2px 0;
    width: 100%;
    align-self: flex-end;
}

.customer-stats {
    font-size: 0.9em;
    color: #555;
}

.customer-details {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
}
.cooking-element {
    margin-bottom: 15px;
}

.cooking-title {
    font-weight: bold;
}

.taste-result {
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

.result-emoji {
    margin-left: 10px;
}

.player-taste, .customer-taste {
    margin: 0 10px;
}

#current-title {
    font-weight: bold;
}

#current-title.ì£¼ë°©ë³´ì¡° {
    font-weight: bold;
    text-shadow: 0 0 5px black;
}

#current-title.ì£¼ë°©ì¥ {
    font-weight: bold;
    text-shadow: 0 0 5px yellow;
}

#current-title.ë¯¸ìŠë­-ì‰í”„ {
    font-weight: bold;
    text-shadow: 0 0 5px red;
}

#current-title.ë§ˆìŠ¤í„°-ì´ˆë°¥ì™• {
    font-weight: bold;
    text-shadow: 0 0 5px purple;
}

.separator {
    border: none;
    border-top: 1px solid #ddd;
    margin: 15px 0;
}

#result {
    background-color: #e6f3ff;
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
}

.result-title {
    font-weight: bold;
}

        .disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        #reputation-container {
    position: relative;
    margin-top: 10px;
    margin-bottom: 30px;
    width: 100%;
}
#reputation-bar {
    width: 100%;
    height: 10px;
    background-color: #ddd;
    border-radius: 5px;
}
#reputation-progress {
    height: 100%;
    width: 0;
    background-color: #4CAF50;
    border-radius: 5px;
    transition: width 0.5s;
}
#next-title {
    position: absolute;
    right: 0;
    bottom: -20px;
    font-size: 12px;
    color: #666;
}
#game-controls {
    margin-top: 15px;
}

#fish-selection {
    margin-top: 15px;
    width: 100%;
    padding: 5px;
}
#game-container {
    max-height: 100vh;
    overflow-y: auto;
}

.special-customer-result {
    text-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
    color: white;
}

.special-customer-name {
    color: white;
    text-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple, 0 0 20px purple;
    font-weight: bold;
}

#fish-selection option:disabled {
    color: #999;
    background-color: #f0f0f0;
}

.satisfaction-low {
    color: red;
}

.satisfaction-medium {
    color: black;
}

.satisfaction-high {
    color: green;
}

.special-satisfaction-low {
    color: red;
    text-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
}

.special-satisfaction-medium {
    color: white;
    text-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
}

.special-satisfaction-high {
    color: green;
    text-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
}
    </style>
</head>
<body>
    <div id="game-container">
        <h1>ğŸ£ SUSHI MASTER</h1>
        <div id="player-info">
            <p>ğŸ’° MONEY : <span id="money">30000</span>ì›</p>
            <p>ğŸ… í˜„ì¬ ìë¦¬: <span id="current-title">ì•„ë¥´ë°”ì´íŠ¸ìƒ</span></p>
            <p>ğŸ³ í‰íŒ : <span id="reputation">0</span></p>
            <div id="reputation-container">
                <div id="reputation-bar">
                    <div id="reputation-progress"></div>
                </div>
                <span id="next-title"></span>
            </div>
        </div>
        <div id="customer-info" class="customer-info" style="display: none;">
            <div class="customer-avatar">
                <span id="customer-emoji" class="customer-emoji"></span>
            </div>
            <div class="customer-details">
                <h3 id="customer-name" class="customer-name"></h3>
                <p id="customer-order" class="customer-order"></p>
                <p class="customer-price" style="display: none;">ì œì‹œ ê°€ê²©: â‚©<span id="customer-price"></span></p>
                <p class="customer-taste" style="display: none;">ì†ë‹˜ Taste: <span id="customer-total-taste"></span></p>
            </div>
        </div>
        <div id="game-controls">
            <button id="receive-customer">ì†ë‹˜ ë°›ê¸°</button>
            <button id="start-cooking" disabled>ìš”ë¦¬ ì‹œì‘</button>
        </div>
        <select id="fish-selection" style="display: none;">
            <option value="">íšŸê° ì„ íƒ</option>
          </select>
          <p id="selected-fish"></p>
        
        <div id="cooking-area" style="display: none;">
            <div class="cooking-element">
                <p>ğŸšë°¥ì˜ ìµí˜ ì •ë„</p>
                <div class="gauge-container">
                    <div class="gauge"></div>
                    <span class="gauge-value">0</span>
                </div>
                <button class="cooking-button">Cook!</button>
                <div class="taste-result">
                    <span class="result-emoji"></span>
                    <span>ë‹¹ì‹ ì˜ Taste : <span class="player-taste">50</span></span>
                    <span>ì†ë‹˜ì˜ Taste : <span class="customer-taste">50</span></span>
                </div>
            </div>
            <hr class="separator">
            <div class="cooking-element">
                <p>ğŸ”ªíšŒì˜ ë‘ê»˜</p>
                <div class="gauge-container">
                    <div class="gauge"></div>
                    <span class="gauge-value">0</span>
                </div>
                <button class="cooking-button">Cook!</button>
                <div class="taste-result">
                    <span class="result-emoji"></span>
                    <span class="result-emoji"></span>
        <span>ë‹¹ì‹ ì˜ Taste : <span class="player-taste"></span></span>
        <span>ì†ë‹˜ì˜ Taste : <span class="customer-taste"></span></span>
                </div>
            </div>
            <hr class="separator">
            <div class="cooking-element">
                <p>ğŸŒŠë°”ë‹¤ì˜ ì˜í˜¼</p>
                <div class="gauge-container">
                    <div class="gauge"></div>
                    <span class="gauge-value">0</span>
                </div>
                <button class="cooking-button">Cook!</button>
                <div class="taste-result">
                    <span class="result-emoji"></span>
                    <span class="result-emoji"></span>
        <span>ë‹¹ì‹ ì˜ Taste : <span class="player-taste"></span></span>
        <span>ì†ë‹˜ì˜ Taste : <span class="customer-taste"></span></span>
                </div>
            </div>
        </div>
        <div id="result">
            <p class="result-title">âœï¸ì†ë‹˜ì˜ í›„ê¸° : <span id="result-text"></span></p>
            <p>ì–»ì€ ëˆ : <span id="earned-money"></span></p>
            <p>í‰íŒ ë³€í™” : <span id="reputation-change"></span></p>
        </div>
    </div>
    <script>
const titles = [
    { min: 0, title: 'ì•„ë¥´ë°”ì´íŠ¸ìƒ' },
    { min: 300, title: 'ì£¼ë°©ë³´ì¡°' },
    { min: 1000, title: 'ì£¼ë°©ì¥' },
    { min: 3000, title: 'ë¯¸ìŠë­-ì‰í”„' },
    { min: 10000, title: 'ë§ˆìŠ¤í„°-ì´ˆë°¥ì™•' }
];
    // ê²Œì„ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê°ì²´
let gameState = {
    money: 30000,          // í˜„ì¬ ë³´ìœ  ê¸ˆì•¡
    reputation: 0,         // í˜„ì¬ í‰íŒ
    title: 'ì•„ë¥´ë°”ì´íŠ¸ìƒ', // í˜„ì¬ ì¹­í˜¸
    currentCustomer: null, // í˜„ì¬ ì†ë‹˜ ì •ë³´
    cookingStep: 0,        // í˜„ì¬ ìš”ë¦¬ ë‹¨ê³„ (0: ë°¥ì˜ ìµí˜ ì •ë„, 1: íšŒì˜ ë‘ê»˜, 2: ë°”ë‹¤ì˜ ì˜í˜¼)
    currentAnimation: null,// í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì• ë‹ˆë©”ì´ì…˜
    selectedFish: null,    // ì„ íƒëœ íšŸê°
    isCooking: false       // ìš”ë¦¬ ì¤‘ì¸ì§€ ì—¬ë¶€
};

// ì‚¬ìš© ê°€ëŠ¥í•œ íšŸê° ëª©ë¡
const fishTypes = [
    { name: "íŒ”ë”±ì´ëŠ” ê³ ë“±ì–´", price: 3000, effect: null },
    { name: "ì´ˆì—¬ë¦„ íŒŒë„ë¥¼ ìŠ¤ì¹œ ì „ê°±ì´ğŸ’¸", price: 5000, effect: {satisfactionRange: [8, 10], tip: [3000, 5000]} },
    { name: "ì€ë¹› ë°”ëŒì„ ê°€ë¥´ëŠ” ì‚¼ì¹˜ğŸ’¸", price: 7000, effect: {satisfactionRange: [7, 10], tip: [3000, 5000]} },
    { name: "ë°”ë‹¤ì˜ íˆ¬ëª…í•¨ì„ ë‹´ì€ ê´‘ì–´ğŸ’¸", price: 10000, effect: {satisfactionRange: [8, 10], tip: [5000, 10000]} },
    { name: "ë…¹ì•„ë‚´ë¦¬ëŠ” ë“¯í•œ ì—°ì–´ğŸ’¸", price: 12000, effect: {satisfactionRange: [7, 10], tip: [5000, 10000]} },
    { name: "ê¹Šì€ ìˆ˜ì‹¬ì˜ ë§›, ìš°ëŸ­ğŸ‘", price: 20000, effect: {satisfactionRange: [8, 10], reputation: [5, 10]} },
    { name: "ê°¯ë°”ëŒì„ ë¨¸ê¸ˆì€ ë†ì–´ğŸ‘", price: 30000, effect: {satisfactionRange: [7, 10], reputation: [5, 10]} },
    { name: "ê²¨ìš¸ë°”ë‹¤ì˜ ì „ì„¤, ë°©ì–´ğŸ‘", price: 40000, effect: {satisfactionRange: [8, 10], reputation: [10, 20]} },
    { name: "íŒŒë„ ì† ê· í˜•ì„ ì´ë£¬ ê°€ìë¯¸ğŸ‘", price: 50000, effect: {satisfactionRange: [7, 10], reputation: [10, 20]} },
    { name: "ë°”ë‹¤ì˜ ì«„ê¹ƒí•¨ì„ í’ˆì€ ë¬¸ì–´ğŸ’¸ğŸ‘", price: 70000, effect: {satisfactionRange: [8, 10], tip: 10000, reputation: [10, 20]} },
    { name: "ë°”ë‹¤ ë‚´ìŒì„ ë¨¸ê¸ˆì€ ë„ë‹¤ë¦¬ğŸ’¸ğŸ‘", price: 90000, effect: {satisfactionRange: [7, 10], tip: 15000, reputation: [10, 20]} },
    { name: "í™©ê¸ˆë¹› ë¹„ëŠ˜ì˜ ê·€ì¡±, ì°¸ë”ğŸ’¸ğŸ‘", price: 100000, effect: {satisfactionRange: [8, 10], tip: 20000, reputation: [20, 30]} },
    { name: "ë…ì„ í’ˆì€ ë¯¸ì‹ì˜ ê²½ì§€, ë³µì–´ğŸ’¸ğŸ‘", price: 150000, effect: {satisfactionRange: [8, 10], tip: [10000, 20000], reputation: [10, 20]} },
    { name: "ë°”ëŒì²˜ëŸ¼ ë…¹ì•„ë‚´ë¦¬ëŠ” ì°¸ì¹˜ ë±ƒì‚´ğŸ’¸ğŸ‘", price: 300000, effect: {satisfactionRange: [6, 10], tip: [50000, 100000], reputation: [30, 50]} },
    { name: "ë°”ë‹¤ì˜ ì •ìˆ˜ë¥¼ ë‹´ì€ ëŒ€ì™•ì°¸ì¹˜ ì˜¤ë„ë¡œğŸ’¸ğŸ‘", price: 500000, effect: {satisfactionRange: [5, 10], tip: [50000, 120000], reputation: [50, 100]} }
];

// ì†ë‹˜ ê·¸ë£¹ ì •ì˜
const customerGroups = [
    {
        characters: ['ğŸ•º ëª¸ì¹˜ ëŒ„ì„œ', 'ğŸ‘· ì—„ê²©í•œ ê·¼ë¡œì', 'ğŸ§‘â€ğŸ”§ ë°”ê¿”ì¹˜ëŠ” ì •ë¹„ì‚¬', 'ğŸ§‘â€ğŸ’¼ ë¹„ë²”í•œ ì§ì¥ì¸', 'ğŸ’‚ ë“ ë“ í•œ ê·¼ìœ„ë³‘', 'ğŸŒï¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê³¨í”„ì„ ìˆ˜', 'ğŸ§‘â€ğŸ­ ì‚´ì¸ì˜ ìš©ì ‘ê³µ'],
        priceRange: [5000, 20000],
        reputationBase: 0,
        reputationIncrement: 5,
        speed: 'slow'
    },
    {
        characters: ['ğŸ§‘â€ğŸ’» í´ë¦­ì„ ëª¨ë¥´ëŠ” ì§ì›', 'ğŸ¤¸ ë‚ ë µí•œ ìŠ¤íŠ¸ë¦¿ ëŒ„ì„œ', 'ğŸ¤¹ ì¬ë¯¸ì—†ëŠ” ê´‘ëŒ€', 'ğŸ‘® ë³€ì ˆí•œ ê²½ì°°', 'ğŸ«… íƒê´€ì˜¤ë¦¬ 2ì„¸', 'ğŸ… ê·€ì°®ì€ ì‚°íƒ€', 'ğŸ‹ï¸ ìŠ¤í…Œë¡œì´ë“œ ì—­ë„ì„ ìˆ˜', 'ğŸ§‘â€ğŸ³ ì•…ë§ˆì˜ ìš”ë¦¬ì‚¬', 'ğŸ§‘â€ğŸ« ë„íƒœëœ ì„ ìƒë‹˜'],
        priceRange: [20000, 50000],
        reputationBase: -10,
        reputationIncrement: 7,
        speed: 'normal'
    },
    {
        characters: ['ğŸ§‘â€ğŸ¨ ìƒ‰ë§¹ í™”ê°€', 'ğŸ§‘â€ğŸŒ¾ ì €ìŠ¹ì˜ ë†ë¶€', 'ğŸ¦¹ ê°€ë©´ì“´ ì§€ëª…ìˆ˜ë°°ë²”', 'ğŸ§‘â€ğŸš’ ë°©í™”ë²” ì†Œë°©ê´€', 'ğŸ§‘â€ğŸ“ ë©ì²­í•œ ì„ì‚¬', 'ğŸ§‘â€ğŸ”¬ ë¯¸ì¹˜ê´‘ì´ ê³¼í•™ì', 'ğŸ§‘â€ğŸ¤ ì£½ìŒì˜ ë½ìŠ¤íƒ€'],
        priceRange: [50000, 100000],
        reputationBase: -30,
        reputationIncrement: 10,
        speed: 'fast'
    },
    {
        characters: ['ğŸ§ ë‚œìŸì´ ì—˜í”„', 'ğŸ§‘â€âš–ï¸ í¸íŒŒì ì¸ íŒì‚¬', 'ğŸ§™â€â™‚ï¸ AIë¥¼ í™œìš©í•˜ëŠ” ë§ˆë²•ì‚¬', 'ğŸ¥· ì€ë°€í•œ ë‹Œì', 'ğŸ§š ëª»ìƒê¸´ ìš”ì •', 'ğŸ§› í”¼ë¥¼ ëª»ë³´ëŠ” ë±€íŒŒì´ì–´', 'ğŸ¦¸ í‰ë²”í•œ ìŠˆí¼ë§¨'],
        priceRange: [100000, 300000],
        reputationBase: -50,
        reputationIncrement: 15,
        speed: 'very-fast'
    },
    {
        characters: ['ğŸ§‘â€âš•ï¸ ì¹˜ë§¤ ì˜ì‚¬', 'ğŸ§œ ì‚¼ì§€ì°½ ë“  ì¸ì–´', 'ğŸ§‘â€ğŸš€ ì¶¤ì¶”ëŠ” ìš°ì£¼ì¸'],
        priceRange: [300000, 500000],
        reputationBase: -100,
        reputationIncrement: 25,
        speed: 'super-fast'
    }
];

// íŠ¹ë³„ ì†ë‹˜ ì •ì˜
const specialCustomers = [
    { name: 'ğŸ‘¤ ì˜ë¬¸ì˜ ë°±ì¢…ì›', price: 100, isSpecial: true },
    { name: 'ğŸ‘¤ ì˜ë¬¸ì˜ ì•ˆì„±ì¬', price: 100, isSpecial: true }
];

const specialCustomerReputationChanges = [-100, -50, -20, 0, 50, 70, 100, 150, 300, 500];

// ëœë¤ ì†ë‹˜ ì„ íƒ í•¨ìˆ˜
function selectRandomCustomer() {
    if (['ì£¼ë°©ë³´ì¡°', 'ì£¼ë°©ì¥', 'ë¯¸ìŠë­-ì‰í”„', 'ë§ˆìŠ¤í„°-ì´ˆë°¥ì™•'].includes(gameState.title) && Math.random() < 0.1) {
        // íŠ¹ë³„ ì†ë‹˜ ì²˜ë¦¬ (ë³€ê²½ ì—†ìŒ)
        const specialCustomer = specialCustomers[Math.floor(Math.random() * specialCustomers.length)];
        return {
            ...specialCustomer,
            group: { speed: getSpeedForSpecialCustomer(gameState.title) },
            tastes: generateRandomTastes(),
            isSpecial: true
        };
    }
    
    // ì¼ë°˜ ì†ë‹˜ ì²˜ë¦¬
    let availableGroups;
    switch (gameState.title) {
        case 'ì•„ë¥´ë°”ì´íŠ¸ìƒ':
            availableGroups = customerGroups.slice(0, 1);
            break;
        case 'ì£¼ë°©ë³´ì¡°':
            availableGroups = customerGroups.slice(0, 2);
            break;
        case 'ì£¼ë°©ì¥':
            availableGroups = customerGroups.slice(0, 3);
            break;
        case 'ë¯¸ìŠë­-ì‰í”„':
            availableGroups = customerGroups.slice(0, 4);
            break;
        case 'ë§ˆìŠ¤í„°-ì´ˆë°¥ì™•':
            availableGroups = customerGroups;
            break;
    }

    const randomGroup = availableGroups[Math.floor(Math.random() * availableGroups.length)];
    const randomCharacter = randomGroup.characters[Math.floor(Math.random() * randomGroup.characters.length)];
    
    // 100ì› ë‹¨ìœ„ë¡œ ê°€ê²© ì¡°ì •
    const minPrice = Math.ceil(randomGroup.priceRange[0] / 100) * 100;
    const maxPrice = Math.floor(randomGroup.priceRange[1] / 100) * 100;
    const price = Math.floor(Math.random() * ((maxPrice - minPrice) / 100 + 1)) * 100 + minPrice;
    
    return {
        name: randomCharacter,
        price: price,
        group: randomGroup,
        tastes: generateRandomTastes()
    };
}


function getSpeedForSpecialCustomer(title) {
    switch (title) {
        case 'ì£¼ë°©ë³´ì¡°': return 'fast';
        case 'ì£¼ë°©ì¥': return 'very-fast';
        case 'ë¯¸ìŠë­-ì‰í”„':
        case 'ë§ˆìŠ¤í„°-ì´ˆë°¥ì™•': return 'super-fast';
        default: return 'normal';
    }
}

// ëœë¤ Taste ìƒì„± í•¨ìˆ˜
function generateRandomTastes() {
    const totalTaste = Math.floor(Math.random() * 291) + 10; // 10 to 300
    const taste1 = Math.min(Math.floor(Math.random() * (totalTaste - 2)) + 1, 100);
    const taste2 = Math.min(Math.floor(Math.random() * (totalTaste - taste1 - 1)) + 1, 100);
    const taste3 = Math.min(totalTaste - taste1 - taste2, 100);
    return [taste1, taste2, taste3];
}

// ìƒˆë¡œìš´ ì†ë‹˜ì„ ë°›ëŠ” í•¨ìˆ˜
function receiveCustomer() {
    gameState.currentCustomer = selectRandomCustomer();
    displayCustomerInfo();
    document.getElementById('receive-customer').disabled = true;
    document.getElementById('fish-selection').style.display = 'block';
    document.getElementById('start-cooking').disabled = true;
    document.getElementById('cooking-area').style.display = 'none';
    resetCookingArea();
    updateButtonStyles();
    gameState.isCooking = false;

    // ì†ë‹˜ ì •ë³´ í‘œì‹œ
    document.getElementById('customer-info').style.display = 'block';
    document.querySelector('.customer-price').style.display = 'block';
    document.querySelector('.customer-taste').style.display = 'block';

    // íšŸê° ì„ íƒ ì˜µì…˜ ì´ˆê¸°í™” ë° í‘œì‹œ
    const fishSelection = document.getElementById('fish-selection');
    fishSelection.innerHTML = '<option value="">íšŸê° ì„ íƒ</option>';
    fishTypes.forEach(fish => {
        const option = document.createElement('option');
        option.value = fish.name;
        option.textContent = `${fish.name} - ${fish.price}ì›`;
        if (gameState.money < fish.price) {
            option.disabled = true;
        }
        fishSelection.appendChild(option);
    });
    fishSelection.style.display = 'block';
}
// ì†ë‹˜ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
function displayCustomerInfo() {
    const customerEmoji = gameState.currentCustomer.name.split(' ')[0];
    const customerName = gameState.currentCustomer.name.split(' ').slice(1).join(' ');
    document.getElementById('customer-emoji').textContent = customerEmoji;
    
    const customerNameElement = document.getElementById('customer-name');
    customerNameElement.textContent = customerName;
    
    // íŠ¹ë³„ ì†ë‹˜ì¸ ê²½ìš° ë„¤ì˜¨ íš¨ê³¼ í´ë˜ìŠ¤ ì¶”ê°€
    if (gameState.currentCustomer.isSpecial) {
        customerNameElement.classList.add('special-customer-name');
    } else {
        customerNameElement.classList.remove('special-customer-name');
    }
    
    document.getElementById('customer-order').textContent = getRandomOrder();
    document.getElementById('customer-price').textContent = gameState.currentCustomer.price;
    document.getElementById('customer-total-taste').textContent = gameState.currentCustomer.tastes.reduce((a, b) => a + b, 0);
}

// íšŸê° ì„ íƒ UIë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateFishSelectionUI() {
    document.querySelectorAll('#fish-selection button').forEach(button => {
        button.classList.toggle('selected', button.textContent.includes(gameState.selectedFish.name));
    });
}

// ëœë¤ ì£¼ë¬¸ ë¬¸ì¥ ì„ íƒ í•¨ìˆ˜
function getRandomOrder() {
    const orders = [
        "í¬ë¯¸í•œ ë“±ëŒ€ë¹›ì„ ì ‘ì‹œì— ë‹´ì•„ì£¼ì‹œì˜¤.",
"ë°€ë ¤ì™”ë‹¤ ì‚¬ë¼ì§„ í–‰ë³µì„ í•œ ì  ë§›ë³´ê³  ì‹¶ì†Œ.",
"ì¡°ìš©íˆ íë¥´ëŠ” ì‹œê°„ì˜ ë§›ì„ ê°€ì ¸ì˜¤ì‹œì˜¤.",
"ë°”ë‹¤ì— ë¹ íŠ¸ë¦° ë‚´ ì²«ì‚¬ë‘ì„ êº¼ë‚´ì£¼ì‹œì˜¤.",
"ë¬¼ê²°ì²˜ëŸ¼ ìŠ¤ì³ ê°„ ê·¸ë¦¬ì›€ì„ ì–¹ì–´ì£¼ì‹œì˜¤.",
"ì†Œê¸ˆë°”ëŒì— ì”»ê¸´ ì²­ì¶˜ì„ í•œ ì…ì— ì£¼ì‹œì˜¤.",
"ê¹Šì€ íŒŒë„ì˜ ì–´ë‘ ì„ ë§›ë³´ê³  ì‹¶ì†Œ.",
"ì‚¬ë¼ì§„ ë¬¼ê³ ê¸°ë“¤ì˜ ë¹„ë°€ì„ ë‚´ë†“ìœ¼ì‹œì˜¤.",
"íŒŒë„ ëìë½ì— ë§ºíŒ í•œìˆ¨ì„ ë‹´ì•„ì£¼ì‹œì˜¤.",
"ë°”ë‹·ì† ì¹¨ë¬µì„ ìŒë¯¸í•˜ê²Œ í•´ì£¼ì‹œì˜¤.",
"ê²€ì€ í•´ë¥˜ ì† ìƒì–´ë²„ë¦° ë‚˜ë¥¼ ì°¾ì•„ì£¼ì‹œì˜¤.",
"ë©€ì–´ì§„ í•­êµ¬ì˜ í–¥ê¸°ë¥¼ í•œ ì ‘ì‹œ ë‚´ì£¼ì‹œì˜¤.",
"ë¹„ë¦°ë‚´ì— ìŠ¤ì¹œ ì—°ë¯¼ì„ ë§›ë³´ê²Œ í•´ì£¼ì‹œì˜¤.",
"ë¯¸ì§€ì˜ ë°”ë‹¤ë¡œ ë– ë‚˜ê¸° ì „ í•œ ì… ì£¼ì‹œì˜¤.",
"ë°”ë‹·ìƒˆì˜ ë…¸ë˜ë¥¼ íšŒë¡œ ë– ë‹¤ ì£¼ì‹œì˜¤.",
"ì¡°ìš©í•œ ì‹¬ì—° ì†ì˜ ìœ„ì•ˆì„ ì£¼ì‹œì˜¤.",
"ë°¤ë°”ë‹¤ì˜ ì–´ë‘ ì„ ê³ ìš”íˆ ë‹´ì•„ì£¼ì‹œì˜¤.",
"ë°”ë‹¤ ì† ì•½ì†ì´ íšŒë¡œ íƒœì–´ë‚˜ê¸¸ ë°”ë¼ì˜¤.",
"í•œë•Œ ë¹›ë‚¬ë˜ ë³„ì˜ ë§›ì„ ê°€ì ¸ì˜¤ì‹œì˜¤.",
"ì†Œìš©ëŒì´ì²˜ëŸ¼ ìš”ë™ì¹œ ë‚˜ì˜ ê°ì •ì„ ë‚´ì˜¤ì‹œì˜¤.",
"íŒŒë„ì— ì”»ê¸´ ì¶”ì–µ í•œ ì ‘ì‹œ ì£¼ì‹œì˜¤.",
"ëˆˆë¬¼ë¡œ ì—¼ì¥í•œ ì‚¬ë‘ì„ ë§›ë³´ê³  ì‹¶ì†Œ.",
"ê°€ìŠ´ í•œì¼ ì˜ ì„œëŠ˜í•¨ì„ íšŒë¡œ ì˜¬ë ¤ì£¼ì‹œì˜¤.",
"ë°”ë‹¤ì˜ ì•ˆê°œë¥¼ í’ˆì€ ì‹ ë¹„ë¥¼ ë‚´ë†“ìœ¼ì‹œì˜¤.",
"ì™¸ë¡œì›€ì„ ê°„ì¥ì— ë‹´ê°€ ì£¼ì‹œì˜¤.",
"ë‚´ ë§ˆìŒì˜ í•´ì¼ í•œ ì ‘ì‹œ ë¶€íƒí•˜ì˜¤.",
"ë°”ëŒì— í©ì–´ì§„ ê¿ˆì„ ìŒë¯¸í•˜ê²Œ í•´ì£¼ì‹œì˜¤.",
"ì…ì•ˆì—ì„œ ë…¹ëŠ” íŒŒë„ í•œ ì¡°ê° ì£¼ì‹œì˜¤.",
"ì –ì€ ë‹¬ë¹›ì„ íšŒë¡œ ë– ì˜¤ì‹œì˜¤.",
"ë¯¸ë ¨ì´ ë‚¨ì€ ë°”ë‹¤ì˜ ë ë§›ì„ ë³´ì—¬ì£¼ì‹œì˜¤.",
"ì—¼ì›ìœ¼ë¡œ ì–‘ë…í•œ íšŒ í•œ ì ‘ì‹œë¥¼ ë¶€íƒí•˜ì˜¤.",
"ì´ë³„ì˜ ì§ ë§›ì´ ê·¸ë¦¬ì›Œì¡Œì†Œ.",
"ê³ ìš”í•¨ì„ ë°”ë‹¥ê¹Œì§€ ë§›ë³´ê²Œ í•´ì£¼ì‹œì˜¤.",
"í•´ë¬´ì— ê°‡íŒ ë‚­ë§Œ í•œ ì ‘ì‹œë¥¼ ì£¼ì‹œì˜¤.",
"ì‹¬ì—° ì† ì§„ì‹¤ì„ íšŒë¡œ ì–¹ì–´ì£¼ì‹œì˜¤.",
"ë¬¼ê±°í’ˆì²˜ëŸ¼ ì‚¬ë¼ì§„ ì‹œê°„ì„ ë‚´ì˜¤ì‹œì˜¤.",
"ë°”ë‹¤ì— ë‚¨ê¸´ ë‚˜ì˜ í”ì ì„ ëŒë ¤ì£¼ì‹œì˜¤.",
"ëì—†ëŠ” íŒŒë„ì²˜ëŸ¼ ì´ì–´ì§„ ì¸ì—°ì„ ë‹´ì•„ì£¼ì‹œì˜¤.",
"ì†Œê¸ˆê¸°ë¡œ ì±„ìš´ ì™¸ì¹¨ì„ ìŒë¯¸í•˜ê²Œ í•´ì£¼ì‹œì˜¤.",
"ë°”ë‹·ë°”ëŒ í•œ ëª¨ê¸ˆê³¼ í•¨ê»˜ ì£¼ì‹œì˜¤.",
"ì•ˆê°œ ì†ì— ìƒì–´ë²„ë¦° í¬ë§ì„ ì°¾ì•„ì£¼ì‹œì˜¤.",
"ë§ˆìŒ ê¹Šìˆ™ì´ ìŠ¤ë¯¼ ì—¼ì›ì„ í•œ ì…ì— ë§›ë³´ê² ì†Œ.",
"ì‹ì–´ë²„ë¦° íŒŒë„ì˜ ì˜¨ë„ë¥¼ ëŠë¼ê²Œ í•´ì£¼ì‹œì˜¤.",
"ë‹¬ì•„ë‚œ ë§ˆìŒì„ ë‚šì•„ ì˜¬ë ¤ì£¼ì‹œì˜¤.",
"ìˆ˜í‰ì„ ì— ê±¸ë¦° ê·¸ë¦¬ì›€ì„ í•œ ì  ì£¼ì‹œì˜¤.",
"ì•„ë ¨í•¨ì„ íšŒë¡œ ë– ë‹¤ ì£¼ì‹œì˜¤.",
"ì“¸ì“¸í•œ ë°¤í•˜ëŠ˜ ë§›ì´ ê¶ê¸ˆí•˜ì˜¤.",
"ë…¸ì„ë¹› ì‚¬ë‘ì„ ì–¹ì–´ì£¼ì‹œì˜¤.",
"íŒŒë„ì— ì“¸ë ¤ê°„ ê¿ˆì„ íšŒë¡œ ë‚´ë†“ìœ¼ì‹œì˜¤.",
"ì –ì€ ì¶”ì–µì„ ê±´ì ¸ í•œ ì¡°ê° ì£¼ì‹œì˜¤."
    ];
    return orders[Math.floor(Math.random() * orders.length)];
}

// ìš”ë¦¬ë¥¼ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜
function startCooking() {
    if (!gameState.selectedFish) {
        alert("íšŸê°ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
    }
    document.getElementById('cooking-area').style.display = 'block';
    document.getElementById('fish-selection').disabled = true;
    document.getElementById('start-cooking').disabled = true; // ìš”ë¦¬ ì‹œì‘ ë²„íŠ¼ ë¹„í™œì„±í™”
    gameState.cookingStep = 0;
    setupCookingStep();
    gameState.isCooking = true;
    updateButtonStyles();
}


function selectFish(fishName) {
    const selectedFish = fishTypes.find(fish => fish.name === fishName);
    if (selectedFish && gameState.money >= selectedFish.price) {
        gameState.selectedFish = selectedFish;
        document.getElementById('start-cooking').disabled = false;
        updateButtonStyles();
    }
}


// ê° ìš”ë¦¬ ë‹¨ê³„ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
function setupCookingStep() {
    const cookingElements = document.querySelectorAll('.cooking-element');
    cookingElements.forEach((el, index) => {
        el.style.display = 'block';
        if (index === gameState.cookingStep) {
            el.querySelector('.gauge').style.width = '0%';
            el.querySelector('.cooking-button').disabled = false;
        } else {
            el.querySelector('.cooking-button').disabled = true;
        }
    });
    
    const currentElement = cookingElements[gameState.cookingStep];
    const gauge = currentElement.querySelector('.gauge');
    const gaugeValue = currentElement.querySelector('.gauge-value');
    const speed = getSpeed();
    
    let position = 0;
    let direction = 1;
    
    if (gameState.currentAnimation) {
        clearInterval(gameState.currentAnimation);
    }
    
    gameState.currentAnimation = setInterval(() => {
        position += direction * speed;
        if (position >= 100 || position <= 0) {
            direction *= -1;
            position = Math.max(0, Math.min(100, position));
        }
        gauge.style.width = `${position}%`;
        gaugeValue.textContent = Math.round(position);
    }, 50); // 50ms ê°„ê²©ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (ì´ˆë‹¹ 20ë²ˆ)
}
// ì†ë„ ê²°ì • í•¨ìˆ˜
function getSpeed() {
    if (gameState.currentCustomer.isSpecial) {
        switch (gameState.currentCustomer.group.speed) {
            case 'fast': return 3;
            case 'very-fast': return 4;
            case 'super-fast': return 5;
            default: return 2;
        }
    } else {

    if (gameState.currentCustomer.isSpecial) {
        switch (gameState.title) {
            case 'ì•„ë¥´ë°”ì´íŠ¸ìƒ': return 1;
            case 'ì£¼ë°© ë³´ì¡°': return 2;
            case 'ì£¼ë°©ì¥': return 3;
            default: return 4;
        }
    } else {
        switch (gameState.currentCustomer.group.speed) {
            case 'slow': return 1;
            case 'normal': return 2;
            case 'fast': return 3;
            case 'very-fast': return 4;
            case 'super-fast': return 5;
        }
    }
}
}

// ìš”ë¦¬ ë‹¨ê³„ë¥¼ ì§„í–‰í•˜ëŠ” í•¨ìˆ˜
function cookingStep(element) {
    clearInterval(gameState.currentAnimation);
    cancelAnimationFrame(gameState.currentAnimation);
    const playerTaste = parseInt(element.querySelector('.gauge').style.width);
    const customerTaste = gameState.currentCustomer.tastes[gameState.cookingStep];
    
    element.querySelector('.player-taste').textContent = playerTaste;
    element.querySelector('.customer-taste').textContent = customerTaste;
    
    const difference = Math.abs(playerTaste - customerTaste);
    let emoji;
    if (difference < 10) emoji = 'ğŸ¥°';
    else if (difference < 20) emoji = 'ğŸ¤”';
    else emoji = 'ğŸ¤¬';
    
    element.querySelector('.player-taste').textContent += ` ${emoji}`;
    element.querySelector('.cooking-button').disabled = true; // í˜„ì¬ ë‹¨ê³„ ë²„íŠ¼ ë¹„í™œì„±í™”

    gameState.cookingStep++;
    if (gameState.cookingStep < 3) {
        setupCookingStep();
    } else {
        showResult();
    }
}

// ìš”ë¦¬ ê²°ê³¼ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
function showResult() {
    const cookingElements = document.querySelectorAll('.cooking-element');
    const emojis = Array.from(cookingElements).map(el => el.querySelector('.player-taste').textContent.split(' ')[1]);
    const satisfactionLevel = calculateSatisfactionLevel(emojis);
    
    const resultText = getResultText(satisfactionLevel);
    const resultElement = document.getElementById('result-text');
    const earnedMoney = calculateEarnedMoney(satisfactionLevel);
    const reputationChange = calculateReputationChange(satisfactionLevel);
    
    let additionalTip = 0;
    let additionalReputation = 0;
    
    // íšŸê° íš¨ê³¼ ì ìš© (íŠ¹ë³„ ì†ë‹˜ì—ê²Œë„ ì ìš©)
    if (gameState.selectedFish.effect) {
        const effect = gameState.selectedFish.effect;
        if (satisfactionLevel >= effect.satisfactionRange[0] && satisfactionLevel <= effect.satisfactionRange[1]) {
            if (effect.tip) {
                if (Array.isArray(effect.tip)) {
                    additionalTip = Math.floor(Math.random() * (effect.tip[1] - effect.tip[0] + 1)) + effect.tip[0];
                } else {
                    additionalTip = effect.tip;
                }
            }
            if (effect.reputation) {
                additionalReputation = Math.floor(Math.random() * (effect.reputation[1] - effect.reputation[0] + 1)) + effect.reputation[0];
            }
        }
    }
    
    const totalEarnedMoney = gameState.currentCustomer.isSpecial ? (100 + additionalTip) : (earnedMoney + additionalTip);
    const totalReputationChange = reputationChange + additionalReputation;
    
    // ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸
    gameState.money += totalEarnedMoney - gameState.selectedFish.price;
    gameState.reputation += totalReputationChange;
    updateTitle();
    
// ë§Œì¡±ë„ì— ë”°ë¥¸ í´ë˜ìŠ¤ ì„¤ì •
let satisfactionClass;
    if (gameState.currentCustomer.isSpecial) {
        if (satisfactionLevel <= 3) {
            satisfactionClass = 'special-satisfaction-low';
        } else if (satisfactionLevel <= 7) {
            satisfactionClass = 'special-satisfaction-medium';
        } else {
            satisfactionClass = 'special-satisfaction-high';
        }
    } else {
        if (satisfactionLevel <= 3) {
            satisfactionClass = 'satisfaction-low';
        } else if (satisfactionLevel <= 7) {
            satisfactionClass = 'satisfaction-medium';
        } else {
            satisfactionClass = 'satisfaction-high';
        }
    }


    // ê²°ê³¼ í‘œì‹œ
    document.getElementById('result').style.display = 'block';
    
    if (gameState.currentCustomer.isSpecial) {
        document.getElementById('result-text').innerHTML = `<span class="${satisfactionClass}">${resultText}</span>`;
        document.getElementById('earned-money').innerHTML = `<span style="color: purple; font-weight: bold;">100ì›</span>${additionalTip > 0 ? ` + <span style="color: blue; font-weight: bold;">íŒ:${additionalTip}ì›</span>` : ''} (íŠ¹ë³„ ì†ë‹˜)`;
        document.getElementById('reputation-change').innerHTML = `<span style="color: purple; font-weight: bold;">${reputationChange}</span>${additionalReputation > 0 ? ` + <span style="color: blue; font-weight: bold;">íšŸê°íš¨ê³¼:+${additionalReputation}</span>` : ''} (íŠ¹ë³„ ì†ë‹˜)`;
    } else {
        document.getElementById('result-text').innerHTML = `<span class="${satisfactionClass}">${resultText}</span>`;
        document.getElementById('earned-money').innerHTML = `${earnedMoney}ì›${additionalTip > 0 ? ` + <span style="color: blue; font-weight: bold;">íŒ:${additionalTip}ì›</span>` : ''}`;
        document.getElementById('reputation-change').innerHTML = `${reputationChange}${additionalReputation > 0 ? ` + <span style="color: blue; font-weight: bold;">íšŸê°íš¨ê³¼:+${additionalReputation}</span>` : ''}`;
    }
    
    updatePlayerInfo();
    
    document.getElementById('receive-customer').disabled = false;
    document.getElementById('start-cooking').disabled = true;
    gameState.isCooking = false;
    updateButtonStyles();
}

// ìš”ë¦¬ ì˜ì—­ì„ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
function resetCookingArea() {
    const cookingElements = document.querySelectorAll('.cooking-element');
    cookingElements.forEach(el => {
        el.style.display = 'none';
        el.querySelector('.gauge').style.width = '0%';
        el.querySelector('.player-taste').textContent = '';
        el.querySelector('.customer-taste').textContent = '';
        el.querySelector('.cooking-button').disabled = false;
    });
    document.getElementById('result').style.display = 'none';
    
    // íšŸê° ì„ íƒ ì´ˆê¸°í™” ë° í™œì„±í™”
    const fishSelection = document.getElementById('fish-selection');
    fishSelection.value = '';
    fishSelection.disabled = false;  // ë¹„í™œì„±í™” í•´ì œ
    fishSelection.style.display = 'none';  // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ ì²˜ë¦¬

    document.getElementById('selected-fish').textContent = '';  // ì„ íƒëœ íšŸê° ì´ˆê¸°í™”

    gameState.selectedFish = null;
    gameState.cookingStep = 0;
    gameState.isCooking = false;
}

// ë§Œì¡±ë„ ë ˆë²¨ ê³„ì‚° í•¨ìˆ˜
function calculateSatisfactionLevel(emojis) {
    const emojiCounts = emojis.reduce((acc, emoji) => {
        acc[emoji] = (acc[emoji] || 0) + 1;
        return acc;
    }, {});
    
    if (emojiCounts['ğŸ¥°'] === 3) return 10;
    if (emojiCounts['ğŸ¥°'] === 2 && emojiCounts['ğŸ¤”'] === 1) return 9;
    if (emojiCounts['ğŸ¥°'] === 2 && emojiCounts['ğŸ¤¬'] === 1) return 8;
    if (emojiCounts['ğŸ¥°'] === 1 && emojiCounts['ğŸ¤”'] === 2) return 7;
    if (emojiCounts['ğŸ¥°'] === 1 && emojiCounts['ğŸ¤”'] === 1 && emojiCounts['ğŸ¤¬'] === 1) return 6;
    if (emojiCounts['ğŸ¤”'] === 3) return 5;
    if (emojiCounts['ğŸ¤”'] === 2 && emojiCounts['ğŸ¤¬'] === 1) return 4;
    if (emojiCounts['ğŸ¤”'] === 1 && emojiCounts['ğŸ¤¬'] === 2) return 3;
    if (emojiCounts['ğŸ¤¬'] === 2 && emojiCounts['ğŸ¤”'] === 1) return 2;
    return 1;
}

// ê²°ê³¼ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
function getResultText(satisfactionLevel) {
    const resultTexts = [
        [
            "ì´ê±¸ ë¨¹ëŠë‹ˆ ì°¨ë¼ë¦¬ ë‚´ í˜€ë¥¼ ê°ˆë§¤ê¸°ì—ê²Œ ë°”ì¹˜ê² ì†Œ.",
"ë‚´ í˜€ê°€ í•­í•´ ì¤‘ ì¡°ë‚œë‹¹í•œ ê¸°ë¶„ì´ì˜¤.",
"ì´ê±´ ë°”ë‹¤ë„ ê±°ë¶€í•œ ì‹¤íŒ¨ì‘ì´ì˜¤.",
"ë¨¹ìë§ˆì ë‚´ ì˜í˜¼ì´ ìœ¡ì§€ë¡œ ë„ë§ì³¤ì†Œ.",
"ì´ê±´ ë¯¸ì‹ì´ ì•„ë‹ˆë¼ ì²˜ë²Œì´ì˜¤.",
"ì…ì•ˆì—ì„œ ì „ìŸì´ ë²Œì–´ì¡Œì†Œ. ê·¸ë¦¬ê³  ë‚´ê°€ ì¡Œì†Œ.",
"ë°”ë‹¤ì˜ ì €ì£¼ë¥¼ ë§›ë³¸ ê¸°ë¶„ì´êµ¬ë ¤.",
"ë‚´ ìœ„ì¥ê¹Œì§€ ë¶„ë…¸í•˜ê³  ìˆì†Œ.",
"ì‹¬ì§€ì–´ ë°”ë‹·ë¬¼ë„ ì´ë³´ë‹¤ ë§›ìˆê² ì†Œ.",
"ì´ê±´ ìš”ë¦¬ì‚¬ê°€ ë‚˜ì—ê²Œ ë¬´ì–¸ì˜ ë³µìˆ˜ë¼ë„ í•œ ê±´ê°€?"
        ],
        [
            "ì´ ì´ˆë°¥ì€ ë°”ë‹¤ë¥¼ ëª¨ìš•í•˜ê³  ìˆì†Œ.",
"ì°¨ë¼ë¦¬ ìƒì„ ë³´ë‹¤ ë‚´ê°€ ë” ì‹ ì„ í•˜ê² ì†Œ.",
"ì´ê±¸ ë¨¹ê³  ê°ì •ì„ ìƒì–´ë²„ë ¸ì†Œ.",
"ë¯¸ê°ì´ ë‚˜ë¥¼ ë– ë‚˜ê¸° ì§ì „ì´ì˜¤.",
"ë°”ë‹¤ë¥¼ ì´ë ‡ê²Œ ëŒ€í•˜ëŠ” ê±´ ì£„ì•…ì´ì˜¤.",
"ìƒì„ ë„ ë‚´ê²Œ ì‚¬ê³¼í•˜ê³  ì‹¶ì–´í•  ê±°ìš”.",
"ì´ê±´ ì°¨ë¼ë¦¬ ê°œë°¥ìœ¼ë¡œë‚˜ ì“°ì‹œì˜¤.",
"ê³ ë…ì„ ì”¹ëŠ” ê¸°ë¶„ì´ ì´ë ‡ê² ì§€ìš”.",
"ë‚´ì¼ì€ í•´ì´ˆë¼ë„ ì”¹ì–´ë³´ê² ì†Œ.",
"ë°”ë‹¤ë¥¼ ì‚¼í‚¨ ê²ƒì´ ì´í† ë¡ ì“°ë””ì“¸ ì¤„ì´ì•¼."
        ],
        [
            "í¬ë¯¸í•œ ì§ ë§›ê³¼ ë‚˜ìœ ê¸°ë¶„ì´ êµì°¨í–ˆì†Œ.",
"ë¨¹ì–´ë„ ë¨¹ì€ ê²ƒ ê°™ì§€ ì•Šì†Œ.",
"ë‚´ í˜€ê°€ ë¬´ê°ê°í•´ì¡Œì†Œ.",
"ë°”ë‹¤ì˜ í”ì ì´ í¬ë¯¸í•˜ê²Œ ë‚¨ì•„ìˆì„ ë¿ì´ì˜¤.",
"ìƒì„ ë„ ë‚˜ë¥¼ ìš©ì„œí•˜ì§€ ì•Šê² ì†Œ.",
"ì´ê±´ ë¯¸ê°ì˜ ëª¨í—˜ì´ ì•„ë‹ˆë¼ ì‹œë ¨ì´ì—ˆì†Œ.",
"í˜€ ëì—ì„œ ê¸¸ì„ ìƒì—ˆì†Œ.",
"ì°¨ë¼ë¦¬ ë°”ë‹·ë°”ëŒì„ ë“¤ì´ë§ˆì‹œëŠ” ê²Œ ë‚˜ì•˜ê² ì†Œ.",
"ì–´ì¤‘ê°„í•œ ë§›ì´ ì‚¬ëŒì„ ë” ê´´ë¡­íˆëŠ” ë²•ì´ì˜¤.",
"ì´ê±¸ ë¨¹ê³ ë„ ë¬´ì‚¬í•  ìˆ˜ ìˆì„ì§€ ëª¨ë¥´ê² ì†Œ."
        ],
        [
            "ê¸°ëŒ€ëŠ” í’ë‘ì²˜ëŸ¼ ê¹¨ì ¸ë²„ë ¸ì†Œ.",
"ìƒì„ ì´ ê¸¸ì„ ì˜ëª» ë“¤ì–´ì™”ì†Œ.",
"ë‚´ ì…ì´ ë°°ì‹ ë‹¹í•œ ê¸°ë¶„ì´ì˜¤.",
"ì°¨ë¼ë¦¬ í•´ë³€ ëª¨ë˜ë¥¼ ì”¹ëŠ” ê²Œ ë‚˜ì•˜ì„ì§€ë„ ëª¨ë¥´ê² ì†Œ.",
"ë§›ì´ ë­”ê°€ ë¶€ì¡±í•˜ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤.",
"ë¯¸ì™„ì„±ëœ ë°”ë‹¤ë¥¼ ë§›ë³¸ ê¸°ë¶„ì´ì˜¤.",
"í˜€ì— ë‹¿ëŠ” ìˆœê°„ ì‹¤ë§ê°ì´ ìŠ¤ë©°ë“¤ì—ˆì†Œ.",
"ë§›ë³´ë‹¤ëŠ” í’ê²½ì´ ë” ê¸°ì–µì— ë‚¨ê² ì†Œ.",
"ì•„ë¬´ëŸ° ê°ì •ë„ ë‚¨ê¸°ì§€ ì•ŠëŠ” ë§›ì´ì—ˆì†Œ.",
"ë°”ë‹·ë¬¼ì´ ì¡°ê¸ˆ ëœ ë“¤ì–´ê°„ ëŠë‚Œì´ì˜¤.",
        ],
        [
            "ë°”ë‹¤ë„ ì´ëŸ° ë‚ ì´ ìˆëŠ” ë²•ì´ì§€ìš”.",
"ì© ë‚˜ì˜ì§€ ì•Šì§€ë§Œ ê·¸ë ‡ë‹¤ê³  ëŒ€ë‹¨í•˜ì§€ë„ ì•Šì†Œ.",
"ê·¸ëƒ¥ íŒŒë„ ìœ„ë¥¼ í˜ëŸ¬ê°€ëŠ” ëŠë‚Œì´ì˜¤.",
"ë¬´ë‚œí•œ ì‹ì‚¬ì˜ ì¼í™˜ì´ì—ˆì†Œ.",
"ê·¸ëƒ¥ì €ëƒ¥ ê´œì°®ì•˜ì†Œ.",
"ë³„ ê¸°ëŒ€ ì—†ì´ ë¨¹ì—ˆë”ë‹ˆ ë”± ê·¸ ì •ë„ì˜€ì†Œ.",
"ê´œì°®ê¸´ í–ˆì§€ë§Œ í•œ ë²ˆì´ë©´ ì¡±í•˜ì˜¤.",
"ë§›ìˆì§€ë„, ë‚˜ì˜ì§€ë„ ì•Šì•˜ì†Œ.",
"ë‚´ì¼ ìƒê°ë‚˜ì§„ ì•Šê² ì†Œ.",
"ì´ê²Œ í‰ë²”í•¨ì˜ ë¯¸í•™ì´ê² ì†Œ.",
        ],
        [
            "ì‹ ì„ í•œ íŒŒë„ê°€ ìŠ¤ì¹˜ë“¯ ì§€ë‚˜ê°”ì†Œ.",
"í˜€ ëì— ë‚¨ì€ ì—¬ìš´ì´ ì¢‹ì•˜ì†Œ.",
"íŒŒë„ì— ëª¸ì„ ë§¡ê¸°ëŠ” ê¸°ë¶„ì´ì—ˆì†Œ.",
"ì…ì•ˆì— í¼ì§€ëŠ” ë°”ë‹¤ ë‚´ìŒì´ ê½¤ ì¢‹ì•˜ì†Œ.",
"ì´ ì •ë„ë©´ ì¶©ë¶„íˆ ì¦ê±°ìš´ ì‹ì‚¬ì˜€ì†Œ.",
"ì‘ì§€ë§Œ ë§Œì¡±ìŠ¤ëŸ¬ìš´ í•­í•´ì˜€ì†Œ.",
"ì´ ì •ë„ ë§›ì´ë©´ ë‹¤ì‹œ ì°¾ì•„ì˜¤ê² ì†Œ.",
"ì€ì€í•˜ê²Œ ê¸°ë¶„ ì¢‹ì€ ë°”ë‹¤ì˜ í–¥ì´ ë‚¨ì•„ìˆì†Œ.",
"ê¸°ëŒ€ ì´ìƒìœ¼ë¡œ ì¦ê±°ì› ì†Œ.",
"ìƒê°ë³´ë‹¤ ë” ë‚˜ì€ ë§›ì´ì—ˆì†Œ."
        ],
        [
            "íŒŒë„ê°€ ì†ì‚­ì´ëŠ” ë§›ì´ì—ˆì†Œ.",
"ì´ê²ƒì´ì•¼ë§ë¡œ ì‹ ì„ í•¨ì˜ ì •ìˆ˜êµ¬ë ¤.",
"ì…ì•ˆì— ì‘ì€ ì¶•ì œê°€ ì—´ë ¸ì†Œ.",
"ê¸°ì–µì— ë‚¨ì„ ë§Œí•œ ë§›ì´ì—ˆì†Œ.",
"ë‚´ í˜€ê°€ í™˜í˜¸ì„±ì„ ì§ˆë €ì†Œ.",
"ë¯¸ê°ì˜ í•­í•´ê°€ ìˆœì¡°ë¡­ê²Œ í˜ëŸ¬ê°”ì†Œ.",
"ì‚´ë©°ì‹œ ê¸°ë¶„ ì¢‹ì•„ì§€ëŠ” ë§›ì´ì—ˆì†Œ.",
"ë‚´ì¼ë„ ìƒê°ë‚  ë§›ì´êµ¬ë ¤.",
"ìƒì„ ì´ ë‚˜ë¥¼ ìœ„ë¡œí•´ì£¼ì—ˆì†Œ.",
"ë°”ë‹¤ì™€ í™”í•´í•œ ê¸°ë¶„ì´ì—ˆì†Œ.",
        ],
        [
            "ì”ì”í•œ ë°”ë‹¤ ìœ„ë¥¼ ê±·ëŠ” ê¸°ë¶„ì´ì—ˆì†Œ.",
"í˜€ ëì— ì„ ìœ¨ì´ íë¥´ëŠ” ë“¯í–ˆì†Œ.",
"ë°”ë‹¤ì˜ ì˜¨ê¸°ê°€ ê·¸ëŒ€ë¡œ ì „í•´ì¡Œì†Œ.",
"ì‹ ì„ í•¨ì´ ë‚´ ëª¸ì„ ê°ìŒŒì†Œ.",
"í•œ ì ë„ ì•„ì‰½ì§€ ì•Šì•˜ì†Œ.",
"ì‹ì‚¬ê°€ ì•„ë‹Œ ì˜ˆìˆ ì´ì—ˆì†Œ.",
"ì™„ë²½ì— ê°€ê¹Œìš´ ë§›ì´ì—ˆì†Œ.",
"í˜€ì™€ ë§ˆìŒì´ ëª¨ë‘ ì¶©ë§Œí•´ì¡Œì†Œ.",
"íŒŒë„ì™€ í•¨ê»˜ ì¶¤ì„ ì¶˜ ê¸°ë¶„ì´ì˜¤.",
"ì„¸ìƒê³¼ ì ì‹œ í™”í•´í•œ ìˆœê°„ì´ì—ˆì†Œ.",
        ],
        [
            "ì´ ë§›ì€ ì˜í˜¼ì„ ìš¸ë¦¬ëŠ” íŒŒë„ì˜€ì†Œ.",
"í˜€ ëì—ì„œ ë³„ì´ ë¹›ë‚¬ì†Œ.",
"ë¯¸ê°ì´ ê¹¨ì–´ë‚œ ìˆœê°„ì´ì—ˆì†Œ.",
"ë‚´ ì•ˆì˜ ë°”ë‹¤ê°€ ì¶œë ì˜€ì†Œ.",
"ì… ì•ˆì—ì„œ ì”ì¹˜ê°€ ë²Œì–´ì¡Œì†Œ.",
"ì´ ì‹ì‚¬ê°€ ì˜ì›íˆ ê³„ì†ë˜ê¸¸ ë°”ëì†Œ.",
"ì´ê²ƒì€ ì¶•ë³µ ê·¸ ìì²´ì˜€ì†Œ.",
"ë°”ë‹¤ì˜ ë¹„ë°€ì„ ë§›ë³¸ ê¸°ë¶„ì´ì˜¤.",
"ì…ì•ˆì´ í™©í™€ê²½ì— ë¹ ì¡Œì†Œ.",
"ë¯¸ê°ì˜ ì²œêµ­ì— ë‹¤ë…€ì™”ì†Œ."
        ],
        [
            "ì´ê²ƒì€ ë°”ë‹¤ì™€ ìš°ì£¼ì˜ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“œëŠ” ë§›ì´ì—ˆì†Œ.",
"ë‚´ ì˜í˜¼ì´ ë°”ë‹¤ì™€ ì¶¤ì„ ì¶”ì—ˆì†Œ.",
"ì´ í•œ ì…ì´ ì‚¶ì˜ ì •ì ì´ì—ˆì†Œ.",
"ì„¸ìƒì˜ ëª¨ë“  íŒŒë„ê°€ ë‚˜ë¥¼ ë°˜ê²¼ì†Œ.",
"ì´ ì‹ì‚¬ê°€ ì˜ì›íˆ ê³„ì†ë˜ê¸°ë¥¼ ê¸°ë„í–ˆì†Œ.",
"ë°”ë‹¤ ë„ˆë¨¸ì˜ ë³„ê¹Œì§€ ë§›ë³´ì•˜ì†Œ.",
"ì… ì•ˆì—ì„œ ìš°ì£¼ê°€ í¼ì³ì¡Œì†Œ.",
"ì‹ ì´ í—ˆë½í•œ ë§›ì´ì—ˆì†Œ.",
"ì„¸ìƒì—ì„œ ê°€ì¥ ì™„ë²½í•œ ìˆœê°„ì´ì—ˆì†Œ.",
"ì´ ë§›ì€ ê¿ˆì¡°ì°¨ ë¶€ë„ëŸ½ê²Œ ë§Œë“¤ì—ˆì†Œ."
        ]
    ];
    
    // satisfactionLevelì´ resultTextsì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
    const index = Math.min(Math.max(0, satisfactionLevel - 1), resultTexts.length - 1);
    return resultTexts[index][Math.floor(Math.random() * resultTexts[index].length)];
}

// íšë“ ê¸ˆì•¡ ê³„ì‚° í•¨ìˆ˜
function calculateEarnedMoney(satisfactionLevel) {
    let percentage;
    if (satisfactionLevel <= 3) percentage = 0.5;
    else if (satisfactionLevel <= 8) percentage = 1;
    else if (satisfactionLevel === 9) percentage = 1.2;
    else percentage = gameState.currentCustomer.isSpecial ? 2 : 1.5;

    return Math.floor(gameState.currentCustomer.price * percentage);
}

// í‰íŒ ë³€í™” ê³„ì‚° í•¨ìˆ˜
function calculateReputationChange(satisfactionLevel) {
    if (gameState.currentCustomer.isSpecial) {
        return specialCustomerReputationChanges[satisfactionLevel - 1];
    } else {
        const baseReputation = gameState.currentCustomer.group.reputationBase;
        const increment = gameState.currentCustomer.group.reputationIncrement;
        return baseReputation + (satisfactionLevel - 1) * increment;
    }
}

// ì¹­í˜¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateTitle() {
    const titles = [
        { min: 0, title: 'ì•„ë¥´ë°”ì´íŠ¸ìƒ' },
        { min: 300, title: 'ì£¼ë°©ë³´ì¡°' },
        { min: 1000, title: 'ì£¼ë°©ì¥' },
        { min: 3000, title: 'ë¯¸ìŠë­-ì‰í”„' },
        { min: 10000, title: 'ë§ˆìŠ¤í„°-ì´ˆë°¥ì™•' }
    ];
    
    for (let i = titles.length - 1; i >= 0; i--) {
        if (gameState.reputation >= titles[i].min) {
            gameState.title = titles[i].title;
            const titleElement = document.getElementById('current-title');
            titleElement.textContent = gameState.title;
            titleElement.className = gameState.title.replace(' ', '-').toLowerCase();
            break;
        }
    }
}

// ê²Œì„ ë¦¬ì…‹ í•¨ìˆ˜
function resetGame() {
    if (gameState.currentAnimation) {
        clearInterval(gameState.currentAnimation);
    }
    const cookingElements = document.querySelectorAll('.cooking-element');
    cookingElements.forEach(el => {
        el.querySelector('.gauge').style.width = '0%';
        el.querySelector('.player-taste').textContent = '';
        el.querySelector('.customer-taste').textContent = '';
        el.querySelector('.cooking-button').disabled = true;
    });
    
    document.getElementById('receive-customer').disabled = false;
    document.getElementById('start-cooking').disabled = true;
    document.getElementById('result').style.display = 'none';
    
    gameState.currentCustomer = null;
    gameState.cookingStep = 0;
    gameState.results = [];
    
    updateButtonStyles();
}

// í”Œë ˆì´ì–´ ì •ë³´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updatePlayerInfo() {
    document.getElementById('money').textContent = gameState.money;
    document.getElementById('reputation').textContent = gameState.reputation;
    updateTitle();
    document.getElementById('current-title').textContent = gameState.title;
    
    let nextTitle = titles.find(t => t.min > gameState.reputation);
    if (nextTitle) {
        let currentTitle = titles[titles.indexOf(nextTitle) - 1];
        let progress = (gameState.reputation - currentTitle.min) / (nextTitle.min - currentTitle.min) * 100;
        document.getElementById('reputation-progress').style.width = `${progress}%`;
        document.getElementById('next-title').textContent = `ë‹¤ìŒ ìë¦¬: ${nextTitle.title} (${nextTitle.min - gameState.reputation}ì  ë‚¨ìŒ)`;
    } else {
        document.getElementById('reputation-progress').style.width = '100%';
        document.getElementById('next-title').textContent = 'ìµœê³  ìë¦¬ ë‹¬ì„±!';
    }
}

// ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateButtonStyles() {
    const receiveCustomerBtn = document.getElementById('receive-customer');
    const startCookingBtn = document.getElementById('start-cooking');
    
    receiveCustomerBtn.classList.toggle('disabled', receiveCustomerBtn.disabled);
    startCookingBtn.classList.toggle('disabled', startCookingBtn.disabled);
}

// ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜
function initGame() {
    updatePlayerInfo();
    document.getElementById('receive-customer').addEventListener('click', receiveCustomer);
    document.getElementById('start-cooking').addEventListener('click', startCooking);
    document.querySelectorAll('.cooking-button').forEach(button => {
        button.addEventListener('click', () => cookingStep(button.closest('.cooking-element')));
    });
    
    const fishSelectionDropdown = document.getElementById('fish-selection');
    fishTypes.forEach(fish => {
        const option = document.createElement('option');
        option.value = fish.name;
        option.textContent = `${fish.name} - ${fish.price}ì›`;
        fishSelectionDropdown.appendChild(option);
    });
    fishSelectionDropdown.addEventListener('change', (e) => selectFish(e.target.value));
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    document.getElementById('start-cooking').disabled = true;
    document.getElementById('fish-selection').style.display = 'none';
    document.getElementById('cooking-area').style.display = 'none';
    document.getElementById('result').style.display = 'none';
    
    resetCookingArea();
    updateButtonStyles();

    // ì‚¬ìš©ì í´ë¦­ í›„ BGM ì¬ìƒí•˜ë„ë¡ ìˆ˜ì •
document.body.addEventListener('click', () => {
    const bgm = document.getElementById('bgm');
    bgm.volume = 0.5; // ë³¼ë¥¨ì„ 50%ë¡œ ì„¤ì •
    bgm.play().catch(e => console.log("Auto-play prevented:", e));
}, { once: true });

}

// ê²Œì„ ì‹œì‘
initGame();

    </script>
</body>
</html>